!function e(t,a,r){function l(n,o){if(!a[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(i)return i(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[n]={exports:{}};t[n][0].call(d.exports,(function(e){var a=t[n][1][e];return l(a||e)}),d,d.exports,e,t,a,r)}return a[n].exports}for(var i="function"==typeof require&&require,n=0;n<r.length;n++)l(r[n]);return l}({1:[function(e,t,a){"use strict";var r=e("../main");"function"==typeof define&&define.amd?define(r):(window.PerfectScrollbar=r,void 0===window.Ps&&(window.Ps=r))},{"../main":7}],2:[function(e,t,a){"use strict";a.add=function(e,t){e.classList?e.classList.add(t):function(e,t){var a=e.className.split(" ");a.indexOf(t)<0&&a.push(t),e.className=a.join(" ")}(e,t)},a.remove=function(e,t){e.classList?e.classList.remove(t):function(e,t){var a=e.className.split(" "),r=a.indexOf(t);r>=0&&a.splice(r,1),e.className=a.join(" ")}(e,t)},a.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t,a){"use strict";var r={e:function(e,t){var a=document.createElement(e);return a.className=t,a},appendTo:function(e,t){return t.appendChild(e),e}};r.css=function(e,t,a){return"object"==typeof t?function(e,t){for(var a in t){var r=t[a];"number"==typeof r&&(r=r.toString()+"px"),e.style[a]=r}return e}(e,t):void 0===a?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,a){return"number"==typeof a&&(a=a.toString()+"px"),e.style[t]=a,e}(e,t,a)},r.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return r.matches(e,t)}))},t.exports=r},{}],4:[function(e,t,a){"use strict";var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var a=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!a||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var l=function(){this.eventElements=[]};l.prototype.eventElement=function(e){var t=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===t&&(t=new r(e),this.eventElements.push(t)),t},l.prototype.bind=function(e,t,a){this.eventElement(e).bind(t,a)},l.prototype.unbind=function(e,t,a){this.eventElement(e).unbind(t,a)},l.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},l.prototype.once=function(e,t,a){var r=this.eventElement(e),l=function(e){r.unbind(t,l),a(e)};r.bind(t,l)},t.exports=l},{}],5:[function(e,t,a){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,a){"use strict";var r=e("./class"),l=e("./dom"),i=a.toInt=function(e){return parseInt(e,10)||0},n=a.clone=function(e){if(e){if(e.constructor===Array)return e.map(n);if("object"==typeof e){var t={};for(var a in e)t[a]=n(e[a]);return t}return e}return null};a.extend=function(e,t){var a=n(e);for(var r in t)a[r]=n(t[r]);return a},a.isEditable=function(e){return l.matches(e,"input,[contenteditable]")||l.matches(e,"select,[contenteditable]")||l.matches(e,"textarea,[contenteditable]")||l.matches(e,"button,[contenteditable]")},a.removePsClasses=function(e){for(var t=r.list(e),a=0;a<t.length;a++){var l=t[a];0===l.indexOf("ps-")&&r.remove(e,l)}},a.outerWidth=function(e){return i(l.css(e,"width"))+i(l.css(e,"paddingLeft"))+i(l.css(e,"paddingRight"))+i(l.css(e,"borderLeftWidth"))+i(l.css(e,"borderRightWidth"))},a.startScrolling=function(e,t){r.add(e,"ps-in-scrolling"),void 0!==t?r.add(e,"ps-"+t):(r.add(e,"ps-x"),r.add(e,"ps-y"))},a.stopScrolling=function(e,t){r.remove(e,"ps-in-scrolling"),void 0!==t?r.remove(e,"ps-"+t):(r.remove(e,"ps-x"),r.remove(e,"ps-y"))},a.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t,a){"use strict";var r=e("./plugin/destroy"),l=e("./plugin/initialize"),i=e("./plugin/update");t.exports={initialize:l,update:i,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t,a){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t,a){"use strict";var r=e("../lib/helper"),l=e("../lib/dom"),i=e("./instances");t.exports=function(e){var t=i.get(e);t&&(t.event.unbindAll(),l.remove(t.scrollbarX),l.remove(t.scrollbarY),l.remove(t.scrollbarXRail),l.remove(t.scrollbarYRail),r.removePsClasses(e),i.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t,a){"use strict";var r=e("../instances"),l=e("../update-geometry"),i=e("../update-scroll");t.exports=function(e){!function(e,t){function a(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var n=r.pageY-window.pageYOffset-a(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;i(e,"top",e.scrollTop+n*t.containerHeight),l(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var n=r.pageX-window.pageXOffset-a(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;i(e,"left",e.scrollLeft+n*t.containerWidth),l(e),r.stopPropagation()}))}(e,r.get(e))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t,a){"use strict";var r=e("../../lib/helper"),l=e("../../lib/dom"),i=e("../instances"),n=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){var t=i.get(e);(function(e,t){function a(a){var l=i+a*t.railXRatio,n=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=l<0?0:l>n?n:l;var s=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;o(e,"left",s)}var i=null,s=null,c=function(t){a(t.pageX-s),n(e),t.stopPropagation(),t.preventDefault()},d=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarX,"mousedown",(function(a){s=a.pageX,i=r.toInt(l.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",d),a.stopPropagation(),a.preventDefault()}))})(e,t),function(e,t){function a(a){var l=i+a*t.railYRatio,n=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=l<0?0:l>n?n:l;var s=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));o(e,"top",s)}var i=null,s=null,c=function(t){a(t.pageY-s),n(e),t.stopPropagation(),t.preventDefault()},d=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarY,"mousedown",(function(a){s=a.pageY,i=r.toInt(l.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",d),a.stopPropagation(),a.preventDefault()}))}(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t,a){"use strict";function r(e,t){var a=!1;t.event.bind(e,"mouseenter",(function(){a=!0})),t.event.bind(e,"mouseleave",(function(){a=!1}));var r=!1;t.event.bind(t.ownerDocument,"keydown",(function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)){var c=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(a||c){var d=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(l.isEditable(d))return}var p=0,u=0;switch(n.which){case 37:p=n.metaKey?-t.contentWidth:n.altKey?-t.containerWidth:-30;break;case 38:u=n.metaKey?t.contentHeight:n.altKey?t.containerHeight:30;break;case 39:p=n.metaKey?t.contentWidth:n.altKey?t.containerWidth:30;break;case 40:u=n.metaKey?-t.contentHeight:n.altKey?-t.containerHeight:-30;break;case 33:u=90;break;case 32:u=n.shiftKey?90:-90;break;case 34:u=-90;break;case 35:u=n.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:u=n.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-u),s(e,"left",e.scrollLeft+p),o(e),r=function(a,r){var l=e.scrollTop;if(0===a){if(!t.scrollbarYActive)return!1;if(0===l&&r>0||l>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var i=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===i&&a<0||i>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}(p,u),r&&n.preventDefault()}}}))}var l=e("../../lib/helper"),i=e("../../lib/dom"),n=e("../instances"),o=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){r(e,n.get(e))}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t,a){"use strict";function r(e,t){function a(a){var l=function(e){var t=e.deltaX,a=-1*e.deltaY;return void 0!==t&&void 0!==a||(t=-1*e.wheelDeltaX/6,a=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,a*=10),t!=t&&a!=a&&(t=0,a=e.wheelDelta),e.shiftKey?[-a,-t]:[t,a]}(a),o=l[0],s=l[1];(function(t,a){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){if(!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var l=r.scrollHeight-r.clientHeight;if(l>0&&!(0===r.scrollTop&&a>0||r.scrollTop===l&&a<0))return!0;var i=r.scrollLeft-r.clientWidth;if(i>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===i&&t>0))return!0}return!1})(o,s)||(r=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(n(e,"top",s?e.scrollTop-s*t.settings.wheelSpeed:e.scrollTop+o*t.settings.wheelSpeed),r=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(n(e,"left",o?e.scrollLeft+o*t.settings.wheelSpeed:e.scrollLeft-s*t.settings.wheelSpeed),r=!0):(n(e,"top",e.scrollTop-s*t.settings.wheelSpeed),n(e,"left",e.scrollLeft+o*t.settings.wheelSpeed)),i(e),r=r||function(a,r){var l=e.scrollTop;if(0===a){if(!t.scrollbarYActive)return!1;if(0===l&&r>0||l>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var i=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===i&&a<0||i>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}(o,s),r&&(a.stopPropagation(),a.preventDefault()))}var r=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",a):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var l=e("../instances"),i=e("../update-geometry"),n=e("../update-scroll");t.exports=function(e){r(e,l.get(e))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t,a){"use strict";var r=e("../instances"),l=e("../update-geometry");t.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){l(e)}))}(e,r.get(e))}},{"../instances":18,"../update-geometry":19}],15:[function(e,t,a){"use strict";function r(e,t){function a(){s||(s=setInterval((function(){return i.get(e)?(o(e,"top",e.scrollTop+c.top),o(e,"left",e.scrollLeft+c.left),void n(e)):void clearInterval(s)}),50))}function r(){s&&(clearInterval(s),s=null),l.stopScrolling(e)}var s=null,c={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){e.contains(function(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}())?d=!0:(d=!1,r())})),t.event.bind(window,"mouseup",(function(){d&&(d=!1,r())})),t.event.bind(window,"keyup",(function(){d&&(d=!1,r())})),t.event.bind(window,"mousemove",(function(t){if(d){var i={x:t.pageX,y:t.pageY},n={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};i.x<n.left+3?(c.left=-5,l.startScrolling(e,"x")):i.x>n.right-3?(c.left=5,l.startScrolling(e,"x")):c.left=0,i.y<n.top+3?(c.top=n.top+3-i.y<5?-5:-20,l.startScrolling(e,"y")):i.y>n.bottom-3?(c.top=i.y-n.bottom+3<5?5:20,l.startScrolling(e,"y")):c.top=0,0===c.top&&0===c.left?r():a()}}))}var l=e("../../lib/helper"),i=e("../instances"),n=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){r(e,i.get(e))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t,a){"use strict";var r=e("../../lib/helper"),l=e("../instances"),i=e("../update-geometry"),n=e("../update-scroll");t.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&function(e,t,a,r){function o(a,r){var l=e.scrollTop,i=e.scrollLeft,n=Math.abs(a),o=Math.abs(r);if(o>n){if(r<0&&l===t.contentHeight-t.containerHeight||r>0&&0===l)return!t.settings.swipePropagation}else if(n>o&&(a<0&&i===t.contentWidth-t.containerWidth||a>0&&0===i))return!t.settings.swipePropagation;return!0}function s(t,a){n(e,"top",e.scrollTop-a),n(e,"left",e.scrollLeft-t),i(e)}function c(){L=!0}function d(){L=!1}function p(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function y(e){if(u(e)){T=!0;var t=p(e);h.pageX=t.pageX,h.pageY=t.pageY,g=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function v(e){if(!T&&t.settings.swipePropagation&&y(e),!L&&T&&u(e)){var a=p(e),r={pageX:a.pageX,pageY:a.pageY},l=r.pageX-h.pageX,i=r.pageY-h.pageY;s(l,i),h=r;var n=(new Date).getTime(),c=n-g;c>0&&(f.x=l/c,f.y=i/c,g=n),o(l,i)&&(e.stopPropagation(),e.preventDefault())}}function m(){!L&&T&&(T=!1,clearInterval(b),b=setInterval((function(){return l.get(e)&&(f.x||f.y)?Math.abs(f.x)<.01&&Math.abs(f.y)<.01?void clearInterval(b):(s(30*f.x,30*f.y),f.x*=.8,void(f.y*=.8)):void clearInterval(b)}),10))}var h={},g=0,f={},b=null,L=!1,T=!1;a?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",d),t.event.bind(e,"touchstart",y),t.event.bind(e,"touchmove",v),t.event.bind(e,"touchend",m)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",d),t.event.bind(e,"pointerdown",y),t.event.bind(e,"pointermove",v),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",d),t.event.bind(e,"MSPointerDown",y),t.event.bind(e,"MSPointerMove",v),t.event.bind(e,"MSPointerUp",m)))}(e,l.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t,a){"use strict";var r=e("../lib/helper"),l=e("../lib/class"),i=e("./instances"),n=e("./update-geometry"),o={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},s=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},l.add(e,"ps-container");var a=i.add(e);a.settings=r.extend(a.settings,t),l.add(e,"ps-theme-"+a.settings.theme),a.settings.handlers.forEach((function(t){o[t](e)})),s(e),n(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,a){"use strict";function r(e){function t(){n.add(e,"ps-focus")}function a(){n.remove(e,"ps-focus")}var r=this;r.settings=i.clone(o),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===s.css(e,"direction"),r.isNegativeScroll=function(){var t,a=e.scrollLeft;return e.scrollLeft=-1,t=e.scrollLeft<0,e.scrollLeft=a,t}(),r.negativeScrollAdjustment=r.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.event=new c,r.ownerDocument=e.ownerDocument||document,r.scrollbarXRail=s.appendTo(s.e("div","ps-scrollbar-x-rail"),e),r.scrollbarX=s.appendTo(s.e("div","ps-scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",t),r.event.bind(r.scrollbarX,"blur",a),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=i.toInt(s.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom==r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:i.toInt(s.css(r.scrollbarXRail,"top")),r.railBorderXWidth=i.toInt(s.css(r.scrollbarXRail,"borderLeftWidth"))+i.toInt(s.css(r.scrollbarXRail,"borderRightWidth")),s.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=i.toInt(s.css(r.scrollbarXRail,"marginLeft"))+i.toInt(s.css(r.scrollbarXRail,"marginRight")),s.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=s.appendTo(s.e("div","ps-scrollbar-y-rail"),e),r.scrollbarY=s.appendTo(s.e("div","ps-scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",t),r.event.bind(r.scrollbarY,"blur",a),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=i.toInt(s.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight==r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:i.toInt(s.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?i.outerWidth(r.scrollbarY):null,r.railBorderYWidth=i.toInt(s.css(r.scrollbarYRail,"borderTopWidth"))+i.toInt(s.css(r.scrollbarYRail,"borderBottomWidth")),s.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=i.toInt(s.css(r.scrollbarYRail,"marginTop"))+i.toInt(s.css(r.scrollbarYRail,"marginBottom")),s.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function l(e){return e.getAttribute("data-ps-id")}var i=e("../lib/helper"),n=e("../lib/class"),o=e("./default-setting"),s=e("../lib/dom"),c=e("../lib/event-manager"),d=e("../lib/guid"),p={};a.add=function(e){var t=d();return function(e,t){e.setAttribute("data-ps-id",t)}(e,t),p[t]=new r(e),p[t]},a.remove=function(e){delete p[l(e)],function(e){e.removeAttribute("data-ps-id")}(e)},a.get=function(e){return p[l(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t,a){"use strict";function r(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}var l=e("../lib/helper"),i=e("../lib/class"),n=e("../lib/dom"),o=e("./instances"),s=e("./update-scroll");t.exports=function(e){var t,a=o.get(e);a.containerWidth=e.clientWidth,a.containerHeight=e.clientHeight,a.contentWidth=e.scrollWidth,a.contentHeight=e.scrollHeight,e.contains(a.scrollbarXRail)||((t=n.queryChildren(e,".ps-scrollbar-x-rail")).length>0&&t.forEach((function(e){n.remove(e)})),n.appendTo(a.scrollbarXRail,e)),e.contains(a.scrollbarYRail)||((t=n.queryChildren(e,".ps-scrollbar-y-rail")).length>0&&t.forEach((function(e){n.remove(e)})),n.appendTo(a.scrollbarYRail,e)),!a.settings.suppressScrollX&&a.containerWidth+a.settings.scrollXMarginOffset<a.contentWidth?(a.scrollbarXActive=!0,a.railXWidth=a.containerWidth-a.railXMarginWidth,a.railXRatio=a.containerWidth/a.railXWidth,a.scrollbarXWidth=r(a,l.toInt(a.railXWidth*a.containerWidth/a.contentWidth)),a.scrollbarXLeft=l.toInt((a.negativeScrollAdjustment+e.scrollLeft)*(a.railXWidth-a.scrollbarXWidth)/(a.contentWidth-a.containerWidth))):a.scrollbarXActive=!1,!a.settings.suppressScrollY&&a.containerHeight+a.settings.scrollYMarginOffset<a.contentHeight?(a.scrollbarYActive=!0,a.railYHeight=a.containerHeight-a.railYMarginHeight,a.railYRatio=a.containerHeight/a.railYHeight,a.scrollbarYHeight=r(a,l.toInt(a.railYHeight*a.containerHeight/a.contentHeight)),a.scrollbarYTop=l.toInt(e.scrollTop*(a.railYHeight-a.scrollbarYHeight)/(a.contentHeight-a.containerHeight))):a.scrollbarYActive=!1,a.scrollbarXLeft>=a.railXWidth-a.scrollbarXWidth&&(a.scrollbarXLeft=a.railXWidth-a.scrollbarXWidth),a.scrollbarYTop>=a.railYHeight-a.scrollbarYHeight&&(a.scrollbarYTop=a.railYHeight-a.scrollbarYHeight),function(e,t){var a={width:t.railXWidth};t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:a.left=e.scrollLeft,t.isScrollbarXUsingBottom?a.bottom=t.scrollbarXBottom-e.scrollTop:a.top=t.scrollbarXTop+e.scrollTop,n.css(t.scrollbarXRail,a);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,n.css(t.scrollbarYRail,r),n.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),n.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,a),a.scrollbarXActive?i.add(e,"ps-active-x"):(i.remove(e,"ps-active-x"),a.scrollbarXWidth=0,a.scrollbarXLeft=0,s(e,"left",0)),a.scrollbarYActive?i.add(e,"ps-active-y"):(i.remove(e,"ps-active-y"),a.scrollbarYHeight=0,a.scrollbarYTop=0,s(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t,a){"use strict";var r,l,i=e("./instances"),n=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,a){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===a)throw"You must provide a value to the update-scroll function";"top"===t&&a<=0&&(e.scrollTop=a=0,e.dispatchEvent(n("ps-y-reach-start"))),"left"===t&&a<=0&&(e.scrollLeft=a=0,e.dispatchEvent(n("ps-x-reach-start")));var o=i.get(e);"top"===t&&a>=o.contentHeight-o.containerHeight&&((a=o.contentHeight-o.containerHeight)-e.scrollTop<=1?a=e.scrollTop:e.scrollTop=a,e.dispatchEvent(n("ps-y-reach-end"))),"left"===t&&a>=o.contentWidth-o.containerWidth&&((a=o.contentWidth-o.containerWidth)-e.scrollLeft<=1?a=e.scrollLeft:e.scrollLeft=a,e.dispatchEvent(n("ps-x-reach-end"))),r||(r=e.scrollTop),l||(l=e.scrollLeft),"top"===t&&a<r&&e.dispatchEvent(n("ps-scroll-up")),"top"===t&&a>r&&e.dispatchEvent(n("ps-scroll-down")),"left"===t&&a<l&&e.dispatchEvent(n("ps-scroll-left")),"left"===t&&a>l&&e.dispatchEvent(n("ps-scroll-right")),"top"===t&&(e.scrollTop=r=a,e.dispatchEvent(n("ps-scroll-y"))),"left"===t&&(e.scrollLeft=l=a,e.dispatchEvent(n("ps-scroll-x")))}},{"./instances":18}],21:[function(e,t,a){"use strict";var r=e("../lib/helper"),l=e("../lib/dom"),i=e("./instances"),n=e("./update-geometry"),o=e("./update-scroll");t.exports=function(e){var t=i.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,l.css(t.scrollbarXRail,"display","block"),l.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(l.css(t.scrollbarXRail,"marginLeft"))+r.toInt(l.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(l.css(t.scrollbarYRail,"marginTop"))+r.toInt(l.css(t.scrollbarYRail,"marginBottom")),l.css(t.scrollbarXRail,"display","none"),l.css(t.scrollbarYRail,"display","none"),n(e),o(e,"top",e.scrollTop),o(e,"left",e.scrollLeft),l.css(t.scrollbarXRail,"display",""),l.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.store=t()}(this,(function(){var e,t={},a=window,r=a.document,l="localStorage",i="script";if(t.disabled=!1,t.version="1.3.19",t.set=function(e,t){},t.get=function(e,t){},t.has=function(e){return void 0!==t.get(e)},t.remove=function(e){},t.clear=function(){},t.transact=function(e,a,r){null==r&&(r=a,a=null),null==a&&(a={});var l=t.get(e,a);r(l),t.set(e,l)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return l in a&&a[l]}catch(e){return!1}}())e=a[l],t.set=function(a,r){return void 0===r?t.remove(a):(e.setItem(a,t.serialize(r)),r)},t.get=function(a,r){var l=t.deserialize(e.getItem(a));return void 0===l?r:l},t.remove=function(t){e.removeItem(t)},t.clear=function(){e.clear()},t.getAll=function(){var e={};return t.forEach((function(t,a){e[t]=a})),e},t.forEach=function(a){for(var r=0;r<e.length;r++){var l=e.key(r);a(l,t.get(l))}};else if(r.documentElement.addBehavior){var n,o;try{(o=new ActiveXObject("htmlfile")).open(),o.write("<"+i+">document.w=window</"+i+'><iframe src="/favicon.ico"></iframe>'),o.close(),n=o.w.frames[0].document,e=n.createElement("div")}catch(t){e=r.createElement("div"),n=r.body}var s=function(a){return function(){var r=Array.prototype.slice.call(arguments,0);r.unshift(e),n.appendChild(e),e.addBehavior("#default#userData"),e.load(l);var i=a.apply(t,r);return n.removeChild(e),i}},c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),d=function(e){return e.replace(/^d/,"___$&").replace(c,"___")};t.set=s((function(e,a,r){return a=d(a),void 0===r?t.remove(a):(e.setAttribute(a,t.serialize(r)),e.save(l),r)})),t.get=s((function(e,a,r){a=d(a);var l=t.deserialize(e.getAttribute(a));return void 0===l?r:l})),t.remove=s((function(e,t){t=d(t),e.removeAttribute(t),e.save(l)})),t.clear=s((function(e){var t=e.XMLDocument.documentElement.attributes;for(e.load(l);t.length;)e.removeAttribute(t[0].name);e.save(l)})),t.getAll=function(e){var a={};return t.forEach((function(e,t){a[e]=t})),a},t.forEach=s((function(e,a){for(var r,l=e.XMLDocument.documentElement.attributes,i=0;r=l[i];++i)a(r.name,t.deserialize(e.getAttribute(r.name)))}))}try{var p="__storejs__";t.set(p,p),t.get(p)!=p&&(t.disabled=!0),t.remove(p)}catch(e){t.disabled=!0}return t.enabled=!t.disabled,t})),function(e){var t=/iPhone/i,a=/iPod/i,r=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,i=/Android/i,n=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,o=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,s=/IEMobile/i,c=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,d=/BlackBerry/i,p=/BB10/i,u=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=/UC.*Browser|UCWEB/i,h=/AppleTV/i,g=/(GoogleTV|CrKey)/i,f=/(SmartTV|SMART-TV|Tizen(.*TV))/i,b=/(Sony(.*TV)|TV(.*Sony))/i,L=/(LG(.*NetCast))/i,T=/TSB(.*TV)/i,w=/Viera/i,k=/(HbbTV|Espial|NETTV|TV(.*HDMI))/i,E=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(e,t){return e.test(t)},M=function(e){var M=e||navigator.userAgent,A=M.split("[FBAN");if(void 0!==A[1]&&(M=A[0]),this.apple={phone:x(t,M),ipod:x(a,M),tablet:!x(t,M)&&x(r,M),device:x(t,M)||x(a,M)||x(r,M)},this.amazon={phone:x(n,M),tablet:!x(n,M)&&x(o,M),device:x(n,M)||x(o,M)},this.android={phone:x(n,M)||x(l,M),tablet:!x(n,M)&&!x(l,M)&&(x(o,M)||x(i,M)),device:x(n,M)||x(o,M)||x(l,M)||x(i,M)},this.windows={phone:x(s,M),tablet:x(c,M),device:x(s,M)||x(c,M)},this.tvu={apple:x(h,M),google:x(g,M),samsung:x(f,M),sony:x(b,M),lg:x(L,M),toshiba:x(T,M),panasonic:x(w,M),other:x(k,M)},this.other={blackberry:x(d,M),blackberry10:x(p,M),opera:x(u,M),firefox:x(v,M),chrome:x(y,M),uc:x(m,M),device:x(d,M)||x(p,M)||x(u,M)||x(v,M)||x(y,M)},this.seven_inch=x(E,M),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,this.tv=this.tvu.apple||this.tvu.google||this.tvu.samsung||this.tvu.sony||this.tvu.lg||this.tvu.toshiba||this.tvu.panasonic||this.tvu.other,"undefined"==typeof window)return this},A=function(){var e=new M;return e.Class=M,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=M:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=A():"function"==typeof define&&define.amd?define("ismobile",[],e.ismobile=A()):e.ismobile=A()}(this),function(){"use strict";function e(){var e={parent:document.body,version:"1.0.11",defaultOkLabel:"Ok",okLabel:"Ok",defaultCancelLabel:"Cancel",cancelLabel:"Cancel",defaultMaxLogItems:2,maxLogItems:2,promptValue:"",promptPlaceholder:"",closeLogOnClick:!1,closeLogOnClickDefault:!1,delay:5e3,defaultDelay:5e3,logContainerClass:"alertify-logs",logContainerDefaultClass:"alertify-logs",dialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<p class='msg'>{{message}}</p>",log:"<div class='{{class}}'>{{message}}</div>"},defaultDialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<p class='msg'>{{message}}</p>",log:"<div class='{{class}}'>{{message}}</div>"},build:function(e){var t=this.dialogs.buttons.ok,a="<div class='dialog'><div>"+this.dialogs.message.replace("{{message}}",e.message);return"confirm"!==e.type&&"prompt"!==e.type||(t=this.dialogs.buttons.cancel+this.dialogs.buttons.ok),"prompt"===e.type&&(a+=this.dialogs.input),(a+this.dialogs.buttons.holder+"</div></div>").replace("{{buttons}}",t).replace("{{ok}}",this.okLabel).replace("{{cancel}}",this.cancelLabel)},setCloseLogOnClick:function(e){this.closeLogOnClick=!!e},close:function(e,a){this.closeLogOnClick&&e.addEventListener("click",(function(){t(e)})),0>(a=a&&!isNaN(+a)?+a:this.delay)?t(e):a>0&&setTimeout((function(){t(e)}),a)},dialog:function(e,t,a,r){return this.setup({type:t,message:e,onOkay:a,onCancel:r})},log:function(e,t,a){var r=document.querySelectorAll(".alertify-logs > div");if(r){var l=r.length-this.maxLogItems;if(l>=0)for(var i=0,n=l+1;n>i;i++)this.close(r[i],-1)}this.notify(e,t,a)},setLogPosition:function(e){this.logContainerClass="alertify-logs "+e},setupLogContainer:function(){var e=document.querySelector(".alertify-logs"),t=this.logContainerClass;return e||((e=document.createElement("div")).className=t,this.parent.appendChild(e)),e.className!==t&&(e.className=t),e},notify:function(t,a,r){var l=this.setupLogContainer(),i=document.createElement("div");i.className=a||"default",e.logTemplateMethod?i.innerHTML=e.logTemplateMethod(t):i.innerHTML=t,"function"==typeof r&&i.addEventListener("click",r),l.appendChild(i),setTimeout((function(){i.className+=" show"}),10),this.close(i,this.delay)},setup:function(e){function a(a){"function"!=typeof a&&(a=function(){}),i&&i.addEventListener("click",(function(l){e.onOkay&&"function"==typeof e.onOkay&&(o?e.onOkay(o.value,l):e.onOkay(l)),a(o?{buttonClicked:"ok",inputValue:o.value,event:l}:{buttonClicked:"ok",event:l}),t(r)})),n&&n.addEventListener("click",(function(l){e.onCancel&&"function"==typeof e.onCancel&&e.onCancel(l),a({buttonClicked:"cancel",event:l}),t(r)})),o&&o.addEventListener("keyup",(function(e){13===e.which&&i.click()}))}var r=document.createElement("div");r.className="alertify hide",r.innerHTML=this.build(e);var l,i=r.querySelector(".ok"),n=r.querySelector(".cancel"),o=r.querySelector("input"),s=r.querySelector("label");return o&&("string"==typeof this.promptPlaceholder&&(s?s.textContent=this.promptPlaceholder:o.placeholder=this.promptPlaceholder),"string"==typeof this.promptValue&&(o.value=this.promptValue)),"function"==typeof Promise?l=new Promise(a):a(),this.parent.appendChild(r),setTimeout((function(){r.classList.remove("hide"),o&&e.type&&"prompt"===e.type?(o.select(),o.focus()):i&&i.focus()}),100),l},okBtn:function(e){return this.okLabel=e,this},setDelay:function(e){return e=e||0,this.delay=isNaN(e)?this.defaultDelay:parseInt(e,10),this},cancelBtn:function(e){return this.cancelLabel=e,this},setMaxLogItems:function(e){this.maxLogItems=parseInt(e||this.defaultMaxLogItems)},theme:function(e){switch(e.toLowerCase()){case"bootstrap":this.dialogs.buttons.ok="<button class='ok btn btn-primary' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel btn btn-default' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<input type='text' class='form-control'>";break;case"purecss":this.dialogs.buttons.ok="<button class='ok pure-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel pure-button' tabindex='2'>{{cancel}}</button>";break;case"mdl":case"material-design-light":this.dialogs.buttons.ok="<button class='ok mdl-button mdl-js-button mdl-js-ripple-effect'  tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel mdl-button mdl-js-button mdl-js-ripple-effect' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div class='mdl-textfield mdl-js-textfield'><input class='mdl-textfield__input'><label class='md-textfield__label'></label></div>";break;case"angular-material":this.dialogs.buttons.ok="<button class='ok md-primary md-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel md-button' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div layout='column'><md-input-container md-no-float><input type='text'></md-input-container></div>";break;default:this.dialogs.buttons.ok=this.defaultDialogs.buttons.ok,this.dialogs.buttons.cancel=this.defaultDialogs.buttons.cancel,this.dialogs.input=this.defaultDialogs.input}},reset:function(){this.parent=document.body,this.theme("default"),this.okBtn(this.defaultOkLabel),this.cancelBtn(this.defaultCancelLabel),this.setMaxLogItems(),this.promptValue="",this.promptPlaceholder="",this.delay=this.defaultDelay,this.setCloseLogOnClick(this.closeLogOnClickDefault),this.setLogPosition("bottom left"),this.logTemplateMethod=null},injectCSS:function(){if(!document.querySelector("#alertifyCSS")){var e=document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.id="alertifyCSS",t.innerHTML=".alertify-logs>*{padding:12px 24px;color:#fff;box-shadow:0 2px 5px 0 rgba(0,0,0,.2);border-radius:1px}.alertify-logs>*,.alertify-logs>.default{background:rgba(0,0,0,.8)}.alertify-logs>.error{background:rgba(244,67,54,.8)}.alertify-logs>.success{background:rgba(76,175,80,.9)}.alertify{position:fixed;background-color:rgba(0,0,0,.3);left:0;right:0;top:0;bottom:0;width:100%;height:100%;z-index:1}.alertify.hide{opacity:0;pointer-events:none}.alertify,.alertify.show{box-sizing:border-box;transition:all .33s cubic-bezier(.25,.8,.25,1)}.alertify,.alertify *{box-sizing:border-box}.alertify .dialog{padding:12px}.alertify .alert,.alertify .dialog{width:100%;margin:0 auto;position:relative;top:50%;transform:translateY(-50%)}.alertify .alert>*,.alertify .dialog>*{width:400px;max-width:95%;margin:0 auto;text-align:center;padding:12px;background:#fff;box-shadow:0 2px 4px -1px rgba(0,0,0,.14),0 4px 5px 0 rgba(0,0,0,.098),0 1px 10px 0 rgba(0,0,0,.084)}.alertify .alert .msg,.alertify .dialog .msg{padding:12px;margin-bottom:12px;margin:0;text-align:left}.alertify .alert input:not(.form-control),.alertify .dialog input:not(.form-control){margin-bottom:15px;width:100%;font-size:100%;padding:12px}.alertify .alert input:not(.form-control):focus,.alertify .dialog input:not(.form-control):focus{outline-offset:-2px}.alertify .alert nav,.alertify .dialog nav{text-align:right}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button),.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button){background:transparent;box-sizing:border-box;color:rgba(0,0,0,.87);position:relative;outline:0;border:0;display:inline-block;-ms-flex-align:center;-ms-grid-row-align:center;align-items:center;padding:0 6px;margin:6px 8px;line-height:36px;min-height:36px;white-space:nowrap;min-width:88px;text-align:center;text-transform:uppercase;font-size:14px;text-decoration:none;cursor:pointer;border:1px solid transparent;border-radius:2px}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):active,.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):hover,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):active,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):hover{background-color:rgba(0,0,0,.05)}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):focus,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):focus{border:1px solid rgba(0,0,0,.1)}.alertify .alert nav button.btn,.alertify .dialog nav button.btn{margin:6px 4px}.alertify-logs{position:fixed;z-index:1}.alertify-logs.bottom,.alertify-logs:not(.top){bottom:16px}.alertify-logs.left,.alertify-logs:not(.right){left:16px}.alertify-logs.left>*,.alertify-logs:not(.right)>*{float:left;transform:translateZ(0);height:auto}.alertify-logs.left>.show,.alertify-logs:not(.right)>.show{left:0}.alertify-logs.left>*,.alertify-logs.left>.hide,.alertify-logs:not(.right)>*,.alertify-logs:not(.right)>.hide{left:-110%}.alertify-logs.right{right:16px}.alertify-logs.right>*{float:right;transform:translateZ(0)}.alertify-logs.right>.show{right:0;opacity:1}.alertify-logs.right>*,.alertify-logs.right>.hide{right:-110%;opacity:0}.alertify-logs.top{top:0}.alertify-logs>*{box-sizing:border-box;transition:all .4s cubic-bezier(.25,.8,.25,1);position:relative;clear:both;backface-visibility:hidden;perspective:1000;max-height:0;margin:0;padding:0;overflow:hidden;opacity:0;pointer-events:none}.alertify-logs>.show{margin-top:12px;opacity:1;max-height:1000px;padding:12px;pointer-events:auto}",e.insertBefore(t,e.firstChild)}},removeCSS:function(){var e=document.querySelector("#alertifyCSS");e&&e.parentNode&&e.parentNode.removeChild(e)}};return e.injectCSS(),{_$$alertify:e,parent:function(t){e.parent=t},reset:function(){return e.reset(),this},alert:function(t,a,r){return e.dialog(t,"alert",a,r)||this},confirm:function(t,a,r){return e.dialog(t,"confirm",a,r)||this},prompt:function(t,a,r){return e.dialog(t,"prompt",a,r)||this},log:function(t,a){return e.log(t,"default",a),this},theme:function(t){return e.theme(t),this},success:function(t,a){return e.log(t,"success",a),this},error:function(t,a){return e.log(t,"error",a),this},cancelBtn:function(t){return e.cancelBtn(t),this},okBtn:function(t){return e.okBtn(t),this},delay:function(t){return e.setDelay(t),this},placeholder:function(t){return e.promptPlaceholder=t,this},defaultValue:function(t){return e.promptValue=t,this},maxLogItems:function(t){return e.setMaxLogItems(t),this},closeLogOnClick:function(t){return e.setCloseLogOnClick(!!t),this},logPosition:function(t){return e.setLogPosition(t||""),this},setLogTemplate:function(t){return e.logTemplateMethod=t,this},clearLogs:function(){return e.setupLogContainer().innerHTML="",this},version:e.version}}var t=function(e){if(e){var t=function(){e&&e.parentNode&&e.parentNode.removeChild(e)};e.classList.remove("show"),e.classList.add("hide"),e.addEventListener("transitionend",t),setTimeout(t,500)}};if("undefined"!=typeof module&&module&&module.exports){module.exports=function(){return new e};var a=new e;for(var r in a)module.exports[r]=a[r]}else"function"==typeof define&&define.amd?define((function(){return new e})):window.alertify=new e}();var url="",api="",token=document.querySelector("#token").getAttribute("value"),isLoggedIn=!1,isVIP=!1,userId=null,userDate=null,lockAPI={};try{url=window.location.origin}catch(e){try{url=window.location.protocol+"//"+window.location.host}catch(e){url=window.location.href.split("/")[0]+"//"+window.location.host}}for(var _GLOBAL={_URL:url,_API:api=url+"/api/pa",_TOKEN:token,_IS_LOGGED_IN:isLoggedIn,_IS_VIP:isVIP,_USER_ID:userId,_USER_DATE:userDate},imgDefer=document.getElementsByTagName("img"),i=0;i<imgDefer.length;i++)imgDefer[i].getAttribute("data-src")&&imgDefer[i].setAttribute("src",imgDefer[i].getAttribute("data-src"));function sendAjax(e,t,a){var r=new XMLHttpRequest;return r.open(e,t),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type","application/json"),"GET"!=e&&r.setRequestHeader("X-CSRF-TOKEN",_GLOBAL._TOKEN),r.withCredentials=!0,a?r.send(JSON.stringify(a)):r.send(),r}function getElement(e){return document.querySelector(e)}function getAllElements(e){return document.querySelectorAll(e)}function createElement(e,t,a,r,l){var i=document.createElement(t);if(i.className=a,i.identity=e,r||(r={}),l)for(var n=0;n<l.length;n++)i.setAttribute(l[n].identity,l[n].value);if(r.innerHTML&&(i.innerHTML=r.innerHTML),r.childrens)for(n=0;n<r.childrens.length;n++){var o=createElement(r.childrens[n].identity,r.childrens[n].tag,r.childrens[n].className,r.childrens[n].options,r.childrens[n].properties);i.appendChild(o),i[r.childrens[n].identity]=o}return i}function createElementByJs(e,t,a,r,l){var i=document.createElement(t);if(i.className=a,i.identity=e,r||(r={}),l)for(var n=0;n<l.length;n++)i.setAttribute(l[n].identity,l[n].value);if(r.innerHTML&&(i.innerHTML=r.innerHTML),r.childrens)for(n=0;n<r.childrens.length;n++){var o=createElementByJs(r.childrens[n].identity,r.childrens[n].tag,r.childrens[n].className,r.childrens[n].options,r.childrens[n].properties);i.appendChild(o),i[r.childrens[n].identity]=o}return i}function removeElement(e){try{e.parentNode.removeChild(e)}catch(e){}}function checkAllowCountry(e){return-1==["SG","US","GB","IN"].indexOf(e)}function showLoginForm(){alertify.confirm("Chức năng này chỉ dành cho thành viên đã đăng nhập",(function(){try{activeNavbarRight()}catch(e){}}))}function getTimeAgo(e){var t=e.substring(0,10);e=new Date(e).getTime();var a=((new Date).getTime()-e)/1e3;return a>2592e3?(t=t.split("-"))[2]+"-"+t[1]+"-"+t[0]:a>604800?Math.floor(a/604800)+" tuần trước":a>86400?Math.floor(a/86400)+" ngày trước":a>3600?Math.floor(a/3600)+" giờ trước":a>60?Math.floor(a/60)+" phút trước":Math.floor(a)+" giây trước"}function formatNumber(e){return e<1e3?e:e<1e6?(e/1e3).toFixed(1)+"K":(e/1e6).toFixed(1)+"M"}function fomratDuration(e){var t=Math.floor(e/3600),a=Math.floor(e/60%60),r=Math.floor(e%60);return a<10&&(a="0"+a),r<10&&(r="0"+r),t?t+":"+a+":"+r:a+":"+r}function getPageYOffset(){try{return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}catch(e){return 0}}function getScrollPageType(){try{return document.body.scrollTop>0?1:2}catch(e){}return 0}function scrollTo(e,t,a){if(!(a<=0)){var r=(t-e.scrollTop)/a*10;setTimeout((function(){e.scrollTop=e.scrollTop+r,e.scrollTop!=t&&scrollTo(e,t,a-10)}),10)}}function scrollPageTo(e,t){try{return void(document.body.scrollTop>0?scrollTo(document.body,e,t):scrollTo(document.documentElement,e,t))}catch(e){}window.scrollTo(0,e)}function paginate(e,t,a,r){var l,i,n=Math.ceil(e/a);if(t<1?t=1:t>n&&(t=n),n<=r)l=1,i=n;else{var o=Math.floor(r/2),s=Math.ceil(r/2)-1;t<=o?(l=1,i=r):t+s>=n?(l=n-r+1,i=n):(l=t-o,i=t+s)}return{totalItems:e,currentPage:t,pageSize:a,totalPages:n,startPage:l,endPage:i}}function encodeString(e,t){var a="";e.toString();for(var r=0;r<e.length;r++){var l=e.charCodeAt(r)^t;a+=String.fromCharCode(l)}return a}function shuffle(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a);var r=e[--a];e[a]=e[t],e[t]=r}return e}function setFilmItem(e,t){t||(t={});var a=document.createElement("div");a.className="tray-item";var r='<div class="tray-film-likes">';e.is_movie?r+=e.time:r+=e.largest_episode.name+" / "+e.time,r+="</div>";var l="";e.upcoming&&(l='<div class="tray-item-upcoming">SẮP CHIẾU</div>');var i="";0!=e.imdb&&(i='<span class="tray-item-point"><i class="icon-star"></i> '+e.imdb+"/10</span>");var n='<span class="tray-item-quality">CAM</span>';e.quality>4?n=n.replace("CAM","HDRip"):e.quality>3&&(n=n.replace("CAM","Bluray")),e.quality>2?n=n.replace("CAM","FHD"):e.quality>1?n=n.replace("CAM","HD"):e.quality,n=n.replace("CAM","SD");var o='<div class="tray-item-audio">Raw - Nosub</div>';e.audio?e.audio>3?o=o.replace("Raw - Nosub","Viet-Engsub"):e.audio>2?o=o.replace("Raw - Nosub","Engsub"):e.audio>1?o=o.replace("Raw - Nosub","Lồng tiếng"):e.audio>0&&(o=o.replace("Raw - Nosub","Thuyết minh")):o=o.replace("Raw - Nosub","Vietsub");var s='<div class="tray-item-trailer" data-id="'+e.id+'" title="Xem trailer"><i class="icon-youtube"></i></div>',c=e.thumbnail;t.position<2&&(c=e.poster);var d="/"+e.slug;t.url&&(d=t.url+"/"+e.slug+'" target="_blank');var p='<a href="'+d+'"><img class="tray-item-thumbnail" src="'+c+'"><div class="tray-item-description">'+n+i+'<div class="tray-item-title">'+e.name+'</div><div class="tray-item-meta-info"><div class="tray-film-views">'+formatNumber(e.views)+" xem</div>"+r+'</div></div><div class="tray-item-play-button"><i class="icon-play"></i></div>'+o+l+"</a>";return e.trailer&&(p+=s),a.innerHTML=p,a}function getBlockData(e){var t=e.getAttribute("data-block"),a=e.getAttribute("data-url"),r=sendAjax("GET","/json/"+t+".json");r.onload=function(){var t=JSON.parse(r.responseText);200==r.status&&setHomeBlock(e,a,t.data)}}function setHomeBlock(e,t,a){for(var r=0;r<a.length;r++){if(r>=6)return;var l;l=setFilmItem(a[r],{position:r,url:t}),e.querySelector(".tray-content").appendChild(l)}}function getSponsor(e,t){if(e.length&&!ismobile.tv)for(var a=0;a<e.length;a++)e[a].status&&setSponsor(e[a],t)}function setSponsor(e,t){e.status&&("img"!=e.type?"file"!=e.type?"iframe"!=e.type?"ins"!=e.type?setSponsorCode(e,t):setSponsorIns(e,t):setSponsorIframe(e,t):setSponsorFile(e,t):setSponsorImg(e,t))}function setSponsorImg(e,t){var a=document.createElement("div");a.className="ff-banner banner-"+t,e.class&&(a.className+=" "+e.class);var r="";if(e.rel&&(r='rel="'+e.rel+'"'),a.innerHTML="<a "+r+' href="'+e.link+'" target="_blank"><img src="'+e.img+'"></a>',e.margin&&(a.style.margin=e.margin),e.width&&(a.style.width=e.width),e.height&&(a.style.height=e.height),e.button){var l=document.createElement("div");l.className="banner-close banner-"+t+"-close",l.innerHTML+='<i class="icon-close"></i>',l.onclick=function(){a.classList.add("hidden")},a.appendChild(l)}if(appendSponsor(a,t),"catfish"==t)for(var i=getAllElements(".banner-catfish"),n=i.length-1;n>=0;n--)i[n].style.bottom=50*n+"px"}function setSponsorFile(e,t){var a=document.createElement("script");a.setAttribute("src",e.link),e.id&&a.setAttribute("id",e.id),e.async&&a.setAttribute("async",""),appendSponsor(a,t)}function setSponsorIns(e,t){var a=document.createElement("div");a.className="ff-banner banner-"+t,e.class&&(a.className+=" "+e.class);var r=document.createElement("ins");a.appendChild(r),e.id&&r.setAttribute("data-revive-id",e.id),e.zoneid&&r.setAttribute("data-revive-zoneid",e.zoneid);var l=document.createElement("script");if(l.setAttribute("src",e.link),e.async&&l.setAttribute("async",""),e.width&&(a.style.width=e.width,a.style.height=e.height),e.button){var i=document.createElement("div");i.className="banner-close banner-"+t+"-close",i.innerHTML+='<i class="icon-close"></i>',i.onclick=function(){a.classList.add("hidden")},a.appendChild(i)}appendSponsor(a,t),a.appendChild(l)}function setSponsorIframe(e,t){var a=document.createElement("div");a.className="ff-banner banner-"+t,e.class&&(a.className+=" "+e.class);var r=document.createElement("iframe");if(r.setAttribute("src",e.link),r.scrolling="no",r.frameBorder=0,r.allow="autoplay",r.style="overflow: hidden; border:none; outline:none;",a.appendChild(r),e.width&&(a.style.width=e.width,a.style.height=e.height,r.style.width=e.width,r.style.height=e.height),e.id&&a.setAttribute("id",e.id),e.margin&&(a.style.margin=e.margin),e.button){var l=document.createElement("div");l.className="banner-close banner-"+t+"-close",l.innerHTML+='<i class="icon-close"></i>',l.onclick=function(){a.classList.add("hidden")},a.appendChild(l)}appendSponsor(a,t)}function setSponsorCode(e,t){var a=document.createElement("div");a.className="ff-banner banner-"+t,e.class&&(a.className+=" "+e.class);var r=document.createElement("iframe");r.scrolling="no",r.frameBorder=0,r.allow="autoplay",r.style="overflow: hidden; border:none; outline:none;";var l="<!DOCTYPE html>";if(l+="<html>",l+='<head><base target="_top"><meta charset="UTF-8"></head>',l+='<body border="0" margin="0" style="margin: 0;padding: 0;">',l+=e.code,l+="<body>",l+="</html>",r.onload=function(){if("srcdoc"in r)r.srcdoc=l;else{var e=r.contentDocument||r.contentWindow.document;e.open(),e.write(l),e.close()}},a.appendChild(r),e.width&&(a.style.width=e.width,a.style.height=e.height,r.style.width=e.width,r.style.height=e.height),e.id&&a.setAttribute("id",e.id),e.margin&&(a.style.margin=e.margin),e.button){var i=document.createElement("div");i.className="banner-close banner-"+t+"-close",i.innerHTML+='<i class="icon-close"></i>',i.onclick=function(){a.classList.add("hidden")},a.appendChild(i)}appendSponsor(a,t)}function appendSponsor(e,t){var a=getElement("#sponsor-"+t);a.appendChild(e),a.classList.remove("hidden")}document.addEventListener("click",(function(){try{getElement("#sponsor-preload").classList.add("hidden")}catch(e){}}));var forbiddenList=["&","charCodeAt","firstChild","href","join","match","+","=","TK","<a href='/'>x</a>","innerHTML","fromCharCode","split","constructor","a","div","charAt","","toString","createElement","debugger","+-a^+6","Fingerprint2","KT","TKK","substr","+-3^+b+-f","67bc0a0e207df93c810886524577351547e7e0459830003d0b8affc987d15fd7","length","get",'((function(){var a=1585090455;var b=-1578940101;return 431433+"."+(a+b)})())',".","https?://",""];console.log("%c PLEASE CLOSE DEVELOPER TOOLS!","font-size:24px;color:#d80f16;"),function e(){try{!function e(t){1===(forbiddenList[33]+t/t)[forbiddenList[28]]&&t%20!=0||function(){}[forbiddenList[13]](forbiddenList[20])(),e(++t)}(0)}catch(t){setTimeout(e,5e3)}}();var psNavbar,navbar=getElement("nav"),navbarLeft=getElement("#navbar-left"),navbarRight=getElement("#navbar-right"),navbarToggle=getElement("#navbar-toggle"),navbarMenu=getElement(".navbar-menu"),navbarSearch=getElement(".navbar-search"),alertifyEl=getElement(".alertify"),searchBox=getElement(".search-box input"),searchButton=getElement(".search-box .icon"),searchResult=getElement(".search-result"),searchResultBody=getElement(".result-body"),searchLoading=searchResult.querySelector(".loading"),searchNoitem=searchResult.querySelector(".result-noitem");function activeNavbarLeft(){navbarLeft.classList.add("activated"),navbar.style.zIndex="8888"}function closeNavbar(e){var t=0,a=e.target;"ok"!=a.className&&(navbarLeft.contains(a)||navbarToggle.contains(a)||(navbarLeft.classList.remove("activated"),t++),t>1&&(navbar.style.zIndex=""))}function hideSearchResult(e){navbarSearch.contains(e.target)||(navbarSearch.classList.remove("activated"),searchResult.classList.remove("activated"))}function setMenuHeight(){if(!ismobile.any)return navbarMenu.style="",void(window.innerWidth<1024?psNavbar||(psNavbar=Ps.initialize(navbarMenu,{minScrollbarLength:50,maxScrollbarLength:50})):(navbarLeft.classList.remove("activated"),Ps.destroy(navbarMenu)));var e=window.innerHeight-120;navbarMenu.style.maxHeight=e+"px",navbarMenu.style.overflow="auto"}function navbarOnload(){setMenuHeight()}function showSubMenu(e){e.onclick=function(){this.classList.toggle("activated"),!ismobile.any&&window.innerWidth<1024?Ps.update(navbarMenu):Ps.destroy(navbarMenu)}}window.addEventListener("resize",navbarOnload),window.addEventListener("load",navbarOnload);var navbarLeftBrand=document.createElement("div");navbarLeftBrand.className="navbar-brand",navbarLeftBrand.innerHTML='<a class="logo" href="/">'+getElement(".logo").innerText+"</a>",navbarLeft.appendChild(navbarLeftBrand);var onKeyTimeout,navbarHasSub=getAllElements(".navbar-menu-has-sub");for(i=0;i<navbarHasSub.length;i++)showSubMenu(navbarHasSub[i]);navbarToggle.onclick=function(){activeNavbarLeft()},navbarLeft.querySelector(".navbar-close").onclick=function(){navbarLeft.classList.remove("activated"),navbar.style.zIndex=""};var oldQuery="",pointer=null,slug=null,countryCode=getElement("#country-code").value;function checkSearchResult(){getAllElements(".result-item").length||(searchLoading.classList.add("hidden"),searchNoitem.classList.remove("hidden"),searchNoitem.innerHTML="Nhập tên phim để tìm kiếm")}function searchFilms(){var e=searchBox.value;if(!(e=(e=e.trim().replace(/\s{2,}/g," ")).replace(/[&\/\\#,+()$~@$^%.'"*?<>{}]/g,""))||e==oldQuery)return searchLoading.classList.add("hidden"),e?void 0:(oldQuery=null,removeSearchResult(),void searchResult.classList.remove("activated"));oldQuery=e,searchLoading.classList.remove("hidden");var t=_GLOBAL._API+"/search?q="+e+"&limit=12";countryCode&&(t+="&c="+countryCode);var a=sendAjax("GET",t);a.onload=function(){if(200==a.status||304==a.status){var e=JSON.parse(a.responseText);return console.log(e),removeSearchResult(),void setSearchResult(e.data)}searchLoading.classList.add("hidden")},a.onerror=function(){searchLoading.classList.add("hidden")}}function removeSearchResult(){searchResultBody.innerHTML=""}function setSearchResult(e){if(!e.length)return searchLoading.classList.add("hidden"),searchNoitem.classList.remove("hidden"),void(searchNoitem.innerHTML="Không tìm thấy phim phù hợp");searchNoitem.classList.add("hidden");for(var t=0;t<e.length;t++){var a=document.createElement("div");a.className="result-item",a.setAttribute("data-id",e[t].id),a.setAttribute("data-slug",e[t].slug),a.innerHTML='<a href="/'+e[t].slug+'"><div class="result-item-thumbnail"><img src="'+e[t].poster+'"></div><div class="result-item-meta"><div class="result-item-title">'+e[t].name+'</div><div class="result-item-time">'+e[t].year+" ("+(e[t].is_movie?"":e[t].meta.max_episode_name+" / ")+e[t].time+')</div><div class="result-item-views">'+formatNumber(e[t].views)+" lượt xem</div></div></a>",searchResultBody.appendChild(a)}scrollTo(searchResultBody,0,100),searchLoading.classList.add("hidden"),ismobile.any||Ps.update(searchResultBody)}function setSearchResultHeight(){window.innerWidth>=1024?searchResultBody.style.height="":searchResultBody.style.height=window.innerHeight-115+"px"}function gotoResultPage(e){if(e)window.location=_GLOBAL._URL+"/"+e;else{var t=searchBox.value;(t=(t=t.trim().replace(/\s{2,}/g," ")).replace(/[&\/\\#,+()$~!@$^%.'"*?<>{}]/g,""))&&(window.location=_GLOBAL._URL+"/tim-kiem/"+t)}}function searchOnLoad(){ismobile.any?searchResultBody.style.overflow="auto":Ps.initialize(searchResultBody,{minScrollbarLength:50,maxScrollbarLength:50}),setSearchResultHeight()}window.addEventListener("click",hideSearchResult),window.addEventListener("resize",setSearchResultHeight),window.addEventListener("load",searchOnLoad),searchBox.onkeyup=function(e){clearTimeout(onKeyTimeout),onKeyTimeout=setTimeout((function(){searchFilms()}),200)},searchBox.onkeydown=function(e){if(clearTimeout(onKeyTimeout),navbarSearch.classList.add("activated"),searchResult.classList.add("activated"),(ismobile.any||window.innerWidth<1024)&&(searchResultBody.style.height=window.innerHeight-115+"px"),e.which>=48&&e.which<=90||8==e.which||1==e.which)searchLoading.classList.remove("hidden"),searchNoitem.classList.add("hidden");else{if(13==e.which)return void gotoResultPage(slug);27==e.which&&(searchResult.classList.remove("activated"),pointer&&(t[pointer].classList.remove("activated"),pointer=null,slug=null,scrollTo(searchResultBody,0,100)))}var t=getAllElements(".result-item");if(t.length)if(40!=e.which){if(38==e.which){if(null!=pointer&&pointer-1>=0&&pointer-1<t.length)return t[pointer].classList.remove("activated"),pointer--,slug=t[pointer].getAttribute("data-slug"),t[pointer].classList.add("activated"),void scrollTo(searchResultBody,t[pointer].offsetTop,100);if(0==pointer)return pointer=null,slug=t[0].getAttribute("data-slug"),void t[0].classList.remove("activated");null==pointer&&(pointer=t.length-1,slug=null,t[pointer].classList.add("activated"),scrollTo(searchResultBody,t[pointer].offsetTop,100))}}else{if(null==pointer)return pointer=0,slug=t[0].getAttribute("data-slug"),void t[0].classList.add("activated");if(pointer+1>=t.length){try{t[pointer].classList.remove("activated")}catch(e){}return pointer=null,slug=null,void scrollTo(searchResultBody,0,100)}if(pointer+1<t.length){try{t[pointer].classList.remove("activated")}catch(e){}pointer++,slug=t[pointer].getAttribute("data-slug"),t[pointer].classList.add("activated"),scrollTo(searchResultBody,t[pointer].offsetTop,100)}}},searchBox.onclick=function(e){navbarSearch.classList.add("activated"),searchResult.classList.add("activated"),checkSearchResult()},searchBox.onfocus=function(e){navbarSearch.classList.add("activated"),searchResult.classList.add("activated"),checkSearchResult()},searchButton.onclick=function(){gotoResultPage(null)};var container=getElement(".container"),trailerButton=getElement(".direction-trailer"),videoButton=getElement(".direction-video"),upcomingButton=getElement(".direction-search"),infoBody=getElement(".film-content"),episodeBody=getElement(".film-episode"),episodeitems=getAllElements(".episode-item"),film={id:container.getAttribute("data-id"),episodeId:container.getAttribute("data-episode-id"),type:container.getAttribute("data-type"),upcoming:container.getAttribute("data-is-upcoming"),copyrighted:container.getAttribute("data-copyrighted"),name:container.getAttribute("data-name"),audio:container.getAttribute("data-audio"),quality:container.getAttribute("data-quality")},episode={},player={el_:getElement("#fimfast-player"),init:!0,timer:null,ios:{},cache_:{},options_:{ads:{}}},cachedEpisode=[],cachedError=[],cachedErrorPT=[],cachedTry=[],replyComment={},cachedWindow={innerWidth:window.innerWidth};try{store.forEach((function(e,t){t.submitted&&(new Date).getTime()-t.submitted>3e5&&store.remove(e)}))}catch(e){}function windowOnClick(e){closeNavbar(e)}function getPlayerNotice(e,t){var a="";return e<2&&(a="chưa có HD "),3==t?a+="chỉ có Engsub (phụ đề tiếng Anh), bạn có muốn xem?":((t>4||t<0)&&(a+="chưa có phụ đề, bạn có muốn xem?"),a)}function setPlayerIsFixed(){if(!ismobile.any||window.innerWidth>=1024||window.innerWidth>window.innerHeight)return player.el_.classList.remove("fixed"),player.el_.style.height="",void(container.style.paddingTop="");player.el_.classList.add("fixed"),player.el_.style.height=Math.ceil(.5625*window.innerWidth)+"px",container.style.paddingTop="0"}function clearPlayerStyle(){try{getElement(".playerWrapper").style=""}catch(e){}}function getEpisode(e,t,a){if(lockAPI.episode)alertify.error("Đừng bấm quá nhanh!");else{lockAPI.episode=!0,a||(a={});var r="";if(r="name"!=e?"episode-id-"+t:"episode-"+film.id+"-"+t,!player.episode||a.refresh||!player.episode.upcoming||t!=player.episode.id&&t!=player.episode.name){if(player.timer&&(clearInterval(player.timer.interval),clearInterval(player.timer.animate),clearInterval(player.timer.full),player.timer=null),null!=player.countdown)try{removeElement(player.countdown),player.countdown=void 0,player.el_.classList.remove("player-has-countdown")}catch(e){}if(player.el_.classList.remove("player-error"),player.el_.classList.add("player-waiting"),player.loadingText.innerText="Đang lấy dữ liệu ...",cachedEpisode[t]){if((new Date).getTime()-cachedEpisode[t].submitted<3e5)return episode=cachedEpisode[t].data,a.data=episode,void setEpisode(e,t,a);cachedEpisode[t]=null}var l=store.get(r);if(l)if((new Date).getTime()-l.submitted<3e5){if((episode=l.data).upcoming&&(new Date).getTime()>=new Date(episode.upcoming).getTime())if(episode.sources.fb.length||episode.sources.yt.length||episode.sources.hls){episode.upcoming=null;try{store.set(r,episode)}catch(e){}}else try{store.remove(r)}catch(e){}var i=!1;if(a.refresh){if(episode.upcoming&&(episode.sources.fb.length||episode.sources.yt.length)){i=!0,episode.upcoming=null;try{store.set(r,episode)}catch(e){}}}else(episode.sources.fb.length||episode.sources.yt.length||episode.upcoming)&&(i=!0);if(i)return cachedEpisode[t]=episode,a.data=episode,void setEpisode(e,t,a)}else try{store.remove(r)}catch(e){}var n=sendAjax("GET",_GLOBAL._API+"/films/"+film.id+"/episodes/"+t);n.onload=function(){try{var l=n.getResponseHeader("Date");l=new Date(l).getTime(),player.sync=l-(new Date).getTime(),store.set("sync",player.sync)}catch(e){player.sync=0}if(200==n.status){var i=JSON.parse(n.responseText);episode=i,cachedEpisode[t]={submitted:(new Date).getTime(),data:i};try{store.set(r,{submitted:(new Date).getTime(),data:episode})}catch(e){}a.data=episode,setEpisode(e,t,a)}else 404==n.status&&alertify.error("Không tìm thấy tập "+t+".");lockAPI.episode=!1,player.el_.classList.remove("player-waiting")},n.onerror=function(){lockAPI.episode=!1,player.el_.classList.remove("player-waiting")}}}}function setEpisode(e,t,a){var r=a.data;if(playVideoFromEpisode(r),increaseViews("episodes",r.id),film.type)lockAPI.episode=!1;else{for(var l=document.querySelectorAll(".episode-item.activated"),i=0;i<l.length;i++)l[i].classList.remove("activated");try{getElement(".episode-"+r.name).classList.add("activated")}catch(e){}scrollPageTo(0,600),lockAPI.episode=!1}}function setEpisodeDuration(e,t){if(!lockAPI.duration&&t){lockAPI.duration=!0;var a=sendAjax("POST",_GLOBAL._API+"/episodes/"+e+"/duration",{duration:t});a.onload=function(){lockAPI.duration=!1},a.onerror=function(){lockAPI.duration=!1}}}function increaseViews(e,t){var a=5e3;"episodes"!=e&&(a=10),setTimeout((function(){var a;if(a="episodes"!=e?film.id:player.episode.id,t==a){var r=sendAjax("POST",_GLOBAL._API+"/"+e+"/"+t+"/views");r.onload=function(){JSON.parse(r.responseText);r.status}}}),a)}function getTrailer(){var e=sendAjax("GET",_GLOBAL._API+"/films/"+film.id+"/trailer");e.onload=function(){getElement(".player-content").classList.add("hidden"),getElement(".player-direction").classList.add("hidden");var t=getElement(".player-trailer"),a=JSON.parse(e.responseText),r='<iframe src="https://www.youtube.com/embed/'+a.id+'?autoplay=1&modestbranding&playsinline=1&showinfo=0" frameborder="0" allowfullscreen=""></iframe>';if(a.sources.length){var l=document.createElement("video");return l.src=a.sources[0].src,l.controls=!0,l.autoplay=!0,t.innerHTML="",l.onerror=function(){t.innerHTML=r},t.appendChild(l),void t.classList.remove("hidden")}t.innerHTML=r,t.classList.remove("hidden")}}film.upcoming&&film.upcoming.length?player.el_.appendChild(createElementByJs("content","div","player-content",{childrens:[{identity:"thumbnail",tag:"img",className:"player-thumbnail",options:{},properties:[{identity:"src",value:"/assets/img/countdown-bg.png"}]},{identity:"upcoming",tag:"div",className:"player-upcoming",options:{innerHTML:"Đây là phim sắp chiếu, vui lòng chờ thêm nhé!"}}]})):window.addEventListener("load",(function(){var e=getPlayerNotice(film.quality,film.audio);console.log(e),e.length?player.el_.appendChild(createElementByJs("content","div","player-content",{childrens:[{identity:"thumbnail",tag:"img",className:"player-thumbnail",options:{},properties:[{identity:"src",value:"/assets/img/countdown-bg.png"}]},{identity:"upcoming",tag:"div",className:"player-upcoming",options:{innerHTML:"Phim này "+e}}]})):createPlayer()}));try{videoButton&&(videoButton.onclick=function(){getElement(".player-direction").classList.add("hidden"),createPlayer()})}catch(e){}try{trailerButton&&(trailerButton.onclick=function(){getTrailer()})}catch(e){}var pageLoaded=!1;function filmOnLoad(){pageLoaded||(pageLoaded=!0,increaseViews("films",film.id),ismobile.apple.device&&window.addEventListener("touchstart",(function(e){windowOnClick(e)})))}ismobile.tv||filmOnLoad();var ajaxBlocks=getAllElements('.tray[data-type="ajax"]');for(i=0;i<ajaxBlocks.length;i++)getBlockData(ajaxBlocks[i]);window.addEventListener("load",filmOnLoad),document.addEventListener("load",filmOnLoad),window.addEventListener("click",(function(e){windowOnClick(e)})),window.addEventListener("load",(function(){var e;(e=ismobile.any?sendAjax("get","/mmo/mb.json"):sendAjax("get","/mmo/pc.json")).onload=function(){var t=JSON.parse(e.responseText);if(t.status){if(t.header.length&&getSponsor(t.header,"header"),t.masthead.length&&getSponsor(t.masthead,"masthead"),t.right&&t.right.length&&getSponsor(t.right,"right"),t.under&&t.under.length&&getSponsor(t.under,"under"),t.bottom&&t.bottom.length&&getSponsor(t.bottom,"bottom"),t.catfish.length&&getSponsor(t.catfish,"catfish"),t.preload.length&&getSponsor(t.preload,"preload"),t.balloon&&t.balloon.length&&(getSponsor(t.balloon,"balloon"),t.balloon.length>1)){var a=getElement(".ff-banner.banner-balloon.catfish");if(window.innerWidth<1280)try{a.style.left="300px",a.style.width="700px"}catch(e){}}t.others.length&&getSponsor(t.others,"others")}}}));var onpopstateTimeout,useEmbed=!0,playerWrapper=getElement(".player-wrapper");function createPlayer(){player.init=!0,player.filmId=film.id,player.episodeId=film.episodeId,player.cache_.window_width=window.innerWidth;var e=createElement("context","div","player-context",{innerHTML:"iPlayer 2021"});e.style.display="none",document.body.appendChild(e),player.contextMenu=e;for(var t=[{identity:"video",tag:"video",className:"player-video",options:{},properties:[{identity:"autoplay",value:""},{identity:"preload",value:"auto"},{identity:"playsinline",value:""},{identity:"webkit-playsinline",value:""}]},{identity:"title",tag:"div",className:"player-title"},{identity:"controlBar",tag:"div",className:"player-control-bar",options:{childrens:[{identity:"playToggle",tag:"div",className:"player-control player-play-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-play"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Phát</span>"}}]}},{identity:"prevControl",tag:"div",className:"player-control player-prev-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-backward"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Tập trước</span>"}}]}},{identity:"rewindControl",tag:"div",className:"player-control player-rewind-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-rewind"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Lùi 10s</span>"}}]}},{identity:"forwardControl",tag:"div",className:"player-control player-forward-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-fastforward"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Tới 10s</span>"}}]}},{identity:"nextControl",tag:"div",className:"player-control player-next-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-forward"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Tập sau</span>"}}]}},{identity:"volumeControl",tag:"div",className:"player-control player-volume-control",options:{childrens:[{identity:"volumeToggle",tag:"div",className:"player-control player-volume-toggle",options:{childrens:[{identity:"icon",tag:"i",className:"icon-volume-up"}]}},{identity:"volumeLevel",tag:"div",className:"player-volume-level",options:{childrens:[{identity:"volumeHolder",tag:"div",className:"volume-holder",options:{childrens:[{identity:"volumeSlider",tag:"div",className:"volume-slider"},{identity:"volumeCurrent",tag:"div",className:"volume-current"},{identity:"volumeHandle",tag:"div",className:"volume-handle"}]}}]}}]}},{identity:"currentTime",tag:"div",className:"player-control player-current-time player-time",options:{innerHTML:"<span>00:00</span>"}},{identity:"progressControl",tag:"div",className:"player-progress-control",options:{childrens:[{identity:"progressHolder",tag:"div",className:"player-progress-holder",options:{childrens:[{identity:"background",tag:"div",className:"player-progress-background"},{identity:"loadProgress",tag:"div",className:"player-load-progress"},{identity:"playProgress",tag:"div",className:"player-play-progress"},{identity:"seekHandle",tag:"div",className:"player-seek-handle"}]}},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>00:00</span>"}}]}},{identity:"duration",tag:"div",className:"player-control player-duration player-time",options:{innerHTML:"<span>00:00</span>"}},{identity:"downloadControl",tag:"div",className:"player-control player-download-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-download"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Tải về</span>"}}]}},{identity:"lightToggle",tag:"div",className:"player-control player-light-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-sunny"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Tắt đèn</span>"}}]}},{identity:"settingControl",tag:"div",className:"player-control player-setting-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-settings"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Tuỳ chỉnh</span>"}}]}},{identity:"largeToggle",tag:"div",className:"player-control player-large-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-maximise"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Mở rộng player</span>"}}]}},{identity:"fullscrenToggle",tag:"div",className:"player-control player-fullscreen-control",options:{childrens:[{identity:"icon",tag:"i",className:"icon-expand"},{identity:"tip",tag:"div",className:"player-control-tip",options:{innerHTML:"<span>Toàn màn hình</span>"}}]}}]}},{identity:"board",tag:"div",className:"player-board",options:{childrens:[{identity:"close",tag:"div",className:"player-board-close",options:{childrens:[{identity:"icon",tag:"i",className:"icon-close"}]}},{identity:"selector",tag:"div",className:"player-board-item setting-selector hidden",options:{childrens:[{identity:"label",tag:"div",className:"label",options:{innerHTML:"Chọn tập"}},{identity:"input",tag:"input",className:"selector-input",options:{},properties:[{identity:"type",value:"number"},{identity:"min",value:1},{identity:"max",value:999}]},{identity:"button",tag:"span",className:"selector-button",options:{childrens:[{identity:"icon",tag:"i",className:"icon-play"}]}},{identity:"tip",tag:"span",className:"selector-tip"}]}},{identity:"caption",tag:"div",className:"player-board-item setting-caption hidden",options:{childrens:[{identity:"label",tag:"div",className:"label",options:{innerHTML:"Phụ đề"}}]}},{identity:"server",tag:"div",className:"player-board-item setting-server",options:{childrens:[{identity:"label",tag:"div",className:"label",options:{innerHTML:"Máy chủ"}}]}},{identity:"quality",tag:"div",className:"player-board-item setting-quality",options:{childrens:[{identity:"label",tag:"div",className:"label",options:{innerHTML:"Chất lượng"}}]}},{identity:"font",tag:"div",className:"player-board-item setting-font hidden",options:{childrens:[{identity:"label",tag:"div",className:"label",options:{innerHTML:"Cỡ chữ"}}]}},{identity:"speed",tag:"div",className:"player-board-item setting-speed",options:{childrens:[{identity:"label",tag:"div",className:"label",options:{innerHTML:"Tốc độ"}}]}}]}},{identity:"textTrack",tag:"div",className:"player-cue"},{identity:"error",tag:"div",className:"player-error-display",options:{innerHTML:'<i class="icon-alert"></i>',childrens:[{identity:"message",tag:"span",className:"player-error-message"}]}},{identity:"loading",tag:"div",className:"player-loading"},{identity:"loadingText",tag:"div",className:"player-loading-text"}],a=0;a<t.length;a++){var r=createElement(t[a].identity,t[a].tag,t[a].className,t[a].options,t[a].properties);player.el_.appendChild(r),player[t[a].identity]=r}player.showLoadingSpinner=function(){player.el_.classList.add("player-waiting"),player.loadingText.innerHTML="Đang đợi video"},player.hideLoadingSpinner=function(){player.el_.classList.remove("player-waiting"),player.el_.classList.remove("player-error")},player.createServerItem=function(e){var t,a="setting-server-item server-"+e.server,r={innerHTML:e.label};return e.default&&(a+=" active"),(t=createElementByJs("server-"+e.server,"span",a,r)).onclick=function(){if(!this.classList.contains("active")){player.el_.classList.remove("player-error"),player.error.code=0;for(var t=document.querySelectorAll(".setting-server-item"),a=0;a<t.length;a++)t[a].classList.remove("active");if(this.classList.add("active"),updatePlayerSetting(player.episode,{server:!0}),player.servers.playing=e.server,e.mp4){var r=!1;player.board.quality.classList.remove("hidden");try{for(a=0;a<e.sources.length;a++)player.createQualityItem(e.sources[a]),e.sources[a].default&&(player.video.src=e.sources[a].src,r=!0)}catch(t){return player.video.src=e.source.src,void player.createQualityItem(e.source)}r||(player.video.src=e.sources[0].src,getElement(".setting-quality-item").classList.add("active"))}else e.server>7?playEmbed(player,player.episode,[],{m3u8:e.m3u8,vn:!0}):4!=e.server?e.server>1?playEmbed(player,player.episode,[],{m3u8:e.m3u8}):playHLS(player,player.episode,[],{m3u8:e.m3u8}):playEmbedMp4(player,player.episode,e.sources)}},player.board.server.appendChild(t),t},player.setServerData=function(e){if("hdp"!=e.server){if("hff"==e.server){if(player.servers.vn)return;player.servers.vn={m3u8:e.url,server:8,label:"VN"}}if("hls"!=e.server&&"htt"!=e.server);else{if(player.servers.sg)return;player.servers.sg={m3u8:e.url,server:1,label:"SG"}}}else{if(player.servers.hn)return;player.servers.hn={m3u8:e.url,server:9,label:"HN",default:!0}}},player.createQualityItem=function(e){var t,a="setting-quality-item quality-"+e.quality,r={innerHTML:e.quality};if(parseInt(e.quality)>=720&&(r.childrens=[{name:"sup",tag:"sup",className:"",options:{innerHTML:"HD"}}]),e.default&&(a+=" active"),(t=createElement(e.quality,"span",a,r)).onclick=function(){if(!this.classList.contains("active")){player.el_.classList.remove("player-error"),player.error.code=0;for(var t=document.querySelectorAll(".setting-quality-item"),a=0;a<t.length;a++)t[a].classList.remove("active");this.classList.add("active");var r=player.video.currentTime;if(player.embed)return!ismobile.apple.device||e.mp4?void player.sendMessageToEmbed({level:e.level}):void player.sendMessageToEmbed({m3u8:e.src});if(null==e.level||null==e.level){if(!e.VIP&&player.hls)try{player.hls.destroy(),player.hls=null}catch(e){console.log(e)}player.video.src=e.src}else{try{if(e.VIP&&!player.hls.vip||!e.VIP&&player.hls.vip)try{player.hls.destroy(),player.hls=null}catch(e){console.log(e)}e.VIP&&!player.hls.vip&&(player.hls.vip=null)}catch(e){}player.hls?player.hls.currentLevel=e.level:-1==e.level&&e.VIP?playHLS(player,player.episode,player.cache_.sources,{VIP:!0,level:-1,src:e.src}):playHLS(player,player.episode,player.cache_.sources,{driveHLS:!0,level:e.level,src:e.src})}player.video.currentTime=r,player.cache_.quality=e.quality,player.board.active=!1,player.board.classList.remove("show");try{store.set("quality",e.quality)}catch(e){}player.video.play()}},"480p"!=e.quality)player.board.quality.appendChild(t);else try{var l=player.board.quality.querySelector(".quality-720p");player.board.quality.insertBefore(t,l)}catch(e){}return player.board.quality[e.quality]=t,t},player.removeQualityItems=function(){for(var e=document.querySelectorAll(".setting-quality-item"),t=0;t<e.length;t++)removeElement(e[t])},player.createPlaybackRateItem=function(e){var t,a="setting-speed-item speed-"+e;return 1==e&&(a+=" active"),(t=createElement(e,"span",a,{innerHTML:e})).onclick=function(){this.classList.contains("active")||(player.board.speed.active.classList.remove("active"),player.board.speed.active=this,this.classList.add("active"),player.video.playbackRate=e,player.audio&&(player.audio.playbackRate=e))},t},player.muteVideo=function(){return player.embed?player.muted?(player.sendMessageToEmbed({unmute:!0}),void(player.muted=!1)):(player.sendMessageToEmbed({mute:!0}),void(player.muted=!0)):player.video.muted?void(player.video.muted=!1):void(player.video.muted=!0)},player.isMuted=function(){return player.embed?!!player.muted:!!player.video.muted},player.updateVolumeStyle=function(e){player.controlBar.volumeControl.volumeLevel.style.visibility="visible",player.controlBar.volumeControl.volumeLevel.style.opacity=1,player.controlBar.volumeControl.volumeLevel.volumeHolder.update(e.clientY)},player.updateProgressStyle=function(e){player.video.pause(),player.controlBar.progressControl.progressHolder.onclick(e)},player.sendMessageToEmbed=function(e){if(player.embed&&player.embedWindow)try{player.embedWindow.postMessage(e,"*")}catch(e){console.log(e)}},player.trim=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},player.round=function(e,t){return t||(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},player.formatTime=function(e){var t=Math.floor(e%60),a=Math.floor(e/60%60),r=Math.floor(e/3600);return(isNaN(e)||e===1/0)&&(r=a=t="-"),(r=r>0?r+":":"")+(a=(a<10?"0"+a:a)+":")+(t=t<10?"0"+t:t)},player.parseCues=function(e){var t,a,r,l,i=e.split("\n"),n="";player.cues_=[],player.resetCue();for(var o=1,s=i.length;o<s;o++)if(n=player.trim(i[o])){for(-1==n.indexOf("--\x3e")?(l=n,n=player.trim(i[++o])):l=player.cues_.length,t={id:l,index:player.cues_.length},a=n.split(" --\x3e "),t.startTime=player.parseCueTime(a[0]),t.endTime=player.parseCueTime(a[1]),r=[];i[++o]&&(n=player.trim(i[o]));)r.push(n);t.text=r.join("<br/>"),player.cues_.push(t)}},player.parseCueTime=function(e){var t,a,r,l,i,n=e.split(":"),o=0;return 3==n.length?(t=n[0],a=n[1],r=n[2]):(t=0,a=n[0],r=n[1]),l=(l=(r=r.split(/\s+/)).splice(0,1)[0]).split(/\.|,/),i=parseFloat(l[1]),l=l[0],o+=3600*parseFloat(t),o+=60*parseFloat(a),o+=parseFloat(l),i&&(o+=i/1e3),o},player.resetCue=function(){player.textTrack.nextChange=0,player.embed?player.textTrack.prevChange=player.duration:player.textTrack.prevChange=player.video.duration,player.textTrack.firstActiveIndex=0,player.textTrack.lastActiveIndex=0,player.textTrack.innerHTML=""},player.updateCue=function(){var e=0;if(e=player.embed?player.currentTime:player.video.currentTime,!isNaN(e)&&e&&player.cues_){if(ismobile.apple.device&&!player.ios.fullscreen)for(var t=0;t<player.video.textTracks.length;t++)player.video.textTracks[t].mode="hidden";if(player.cues_.length>0&&((player.textTrack.switch||null==player.textTrack.switch)&&(player.textTrack.switch=!1,player.textTrack.prevChange=void 0,player.textTrack.nextChange=void 0,player.textTrack.firstActiveIndex=void 0,player.textTrack.lastActiveIndex=void 0),!player.textTrack.prevChange||!player.textTrack.nextChange||e<player.textTrack.prevChange||player.textTrack.nextChange<=e)){var a,r,l,i=player.cues_,n=player.embed?player.duration:player.video.duration,o=0,s=!1,c=[];for(e>=player.textTrack.nextChange||void 0===player.textTrack.nextChange?t=void 0!==player.textTrack.firstActiveIndex?player.textTrack.firstActiveIndex:0:(s=!0,t=void 0!==player.textTrack.lastActiveIndex?player.textTrack.lastActiveIndex:i.length-1);;){if((l=i[t]).active=!1,l.endTime<=e)o=Math.max(o,l.endTime);else if(e<l.startTime){if(n=Math.min(n,l.startTime),!s)break}else s?(c.splice(0,0,l),void 0===r&&(r=t),a=t):(c.push(l),void 0===a&&(a=t),r=t),n=Math.min(n,l.endTime),o=Math.max(o,l.startTime),l.active=!0;if(s){if(0===t)break;t--}else{if(t===i.length-1)break;t++}}player.activeCues_=c,player.textTrack.nextChange=n,player.textTrack.prevChange=o,player.textTrack.firstActiveIndex=a,player.textTrack.lastActiveIndex=r,l.active||(player.textTrack.innerHTML=""),player.updateCueDisplay()}}},player.updateCueDisplay=function(){var e=player.activeCues_,t="",a=0,r=0,l=0,i=[],n=[],o=[],s=[];if(e&&(r=e.length),player.textTrack.innerHTML="",player.textTrack.kara=[],player.kara&&clearInterval(player.kara),player.textTrack.mode){for(;a<r;a++)try{i=e[a].text.split("\n");for(var c=0;c<i.length;c++){o[c]=[],s[c]=0,n=i[c].split(" ");for(var d=0;d<n.length;d++){l++;var p=n[d];d+1<n.length&&(p+="&nbsp;"),o[c][d]=createElement("kara"+l,"span","",{innerHTML:p,childrens:[{identity:"kara",tag:"sup",className:"hidden",options:{innerHTML:n[d]}}]}),player.textTrack.appendChild(o[c][d]),player.textTrack.kara.push(o[c][d]),s[c]+=o[c][d].offsetWidth}c+1<i.length&&player.textTrack.appendChild(document.createElement("br"))}var u=0,y=e[a].endTime-e[a].startTime,v=Math.round(y/l*1e3);player.kara=setInterval((function(){if(!(player.embed?player.paused:player.video.paused)){try{player.textTrack.kara[u].kara.classList.remove("hidden")}catch(e){}++u>=l&&clearInterval(player.kara)}}),v)}catch(r){t+="<span>"+e[a].text.replace("\n","<br>")+"</span>"}r>1?player.textTrack.style.width="":s.length>1?player.textTrack.style.width=s.reduce((function(e,t){return Math.max(e,t)}))+44+"px":player.textTrack.style.width=s[0]+44+"px"}else{for(;a<r;a++)t+="<span>"+e[a].text.replace("\n","<br>")+"</span>";""!=t&&(player.textTrack.style.width="",player.textTrack.innerHTML=t,player.textTrack.style.width=r>1?Math.max(player.textTrack.children[0].offsetWidth,player.textTrack.children[1].offsetWidth)+44+"px":player.textTrack.children[0].offsetWidth+44+"px")}},player.updateFullscreenState=function(){player.isFullscreen()?(player.el_.classList.add("player-fullscreen"),player.controlBar.fullscrenToggle.icon.className="icon-contract",player.controlBar.fullscrenToggle.tip.innerHTML="<span>Thu nhỏ màn hình</span>"):(player.el_.classList.remove("player-fullscreen"),player.controlBar.fullscrenToggle.icon.className="icon-expand",player.controlBar.fullscrenToggle.tip.innerHTML="<span>Toàn màn hình</span>");try{player.textTrack.style=""}catch(e){}},player.isFullscreen=function(){return document.webkitIsFullScreen?document.webkitIsFullScreen:document.mozFullScreen?document.mozFullScreen:!!document.fullscreen&&document.fullscreen},player.requestFullscreen=function(){if(player.el_.webkitRequestFullscreen)player.el_.webkitRequestFullscreen();else if(player.el_.mozRequestFullScreen)player.el_.mozRequestFullScreen();else if(player.el_.msRequestFullscreen)player.el_.msRequestFullscreen();else if(ismobile.apple.device){if(player.embed)return;player.video.webkitEnterFullscreen()}else try{player.el_.requestFullscreen()}catch(e){}},player.exitFullscreen=function(){if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozExitFullscreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(ismobile.apple.device){if(player.embed)return;player.video.webkitExitFullscreen()}else try{document.exitFullscreen()}catch(e){}},player.updateTextTrackPosition=function(e){if(player.textTrack.style.bottom="",e){var t,a;player.embed?(l=player.videoHeight,t=player.videoWidth,a=player.el_.offsetWidth):(l=player.video.videoHeight,t=player.video.videoWidth,a=player.video.offsetWidth);try{var r=l/t,l=parseInt(r*a)}catch(e){return}try{r<window.innerHeight/window.innerWidth&&(player.textTrack.style.bottom=parseInt((window.innerHeight-l)/2)+10+"px")}catch(e){}}},player.displayError=function(e){var t="";function a(e){console.log("autoFixError");try{player.video.src.split("/")[2]}catch(e){}try{if(!player.hls||-1!=player.video.src.indexOf(".m3u8"))for(var t=0;t<player.episode.hls.length;t++)if(!player.episode.hls[t].play)return player.episode.sources.hls=player.episode.hls[t].url,playHLS(player,player.episode,player.cache_.sources,{driveHLS:!0}),void console.log("switch hls")}catch(e){console.log("autoFixError HLS"),console.log(e)}try{cachedEpisode[player.episode.id]=null,store.remove("episode-id-"+player.episode.id)}catch(e){}return!1}switch(player.controlBar.playToggle.icon.className="icon-play",player.controlBar.playToggle.tip.innerHTML="<span>Phát</span>",player.el_.classList.remove("player-waiting"),e.target.error.code){case 1:if(t="Bạn vừa huỷ video, tải lại trang để xem",console.log("MEDIA_ERR_ABORTED"),a())return;break;case 2:if(t="Lỗi đường truyền, vui lòng tải lại trang",console.log("MEDIA_ERR_NETWORK"),a())return;break;case 3:t="Không thể chạy file này, hãy báo lỗi với admin nhé!",console.log("MEDIA_ERR_DECODE");break;case 4:if(t="Video bị lỗi hoặc bị chặn",console.log("MEDIA_ERR_SRC_NOT_SUPPORTED"),a())return;break;default:t="Video bị lỗi gì đó, khó hiểu lắm!"}try{player.error.code=e.target.error.code}catch(e){}player.error.message.innerHTML=t,player.el_.classList.add("player-error"),player.el_.classList.remove("player-waiting"),console.log("displayError"),setTimeout((function(){player.el_.classList.add("player-error")}),100)},player.displayContext=function(e){var t=e.pageY,a=e.pageX,r=player.contextMenu.clientHeight+player.controlBar.clientHeight;e.pageY+r>player.el_.clientHeight+player.el_.getBoundingClientRect().top&&(t=e.pageY-player.contextMenu.clientHeight),e.pageX+player.contextMenu.clientWidth>player.el_.clientWidth+player.el_.getBoundingClientRect().left&&(a=e.pageX-player.contextMenu.clientWidth),player.contextMenu.setAttribute("style","top: "+t+"px; left: "+a+"px; display: block;")},player.createMidpoint=function(e,t){var a;(a=createElement("midpoint"+e,"div","player-midpoint-progress")).style.left=t,player.controlBar.progressControl.progressHolder.appendChild(a),player.controlBar.progressControl.progressHolder["midpoint"+e]=a},player.removeMidpoint=function(e){try{removeElement(player.controlBar.progressControl.progressHolder["midpoint"+e])}catch(e){}},player.trackEvent=function(e,t){},player.changeForUserActivity=function(e){e?player.el_.classList.remove("user-inactive"):player.el_.classList.add("user-inactive")},player.listenForUserActivity=function(){var e,t,a=!0;player.el_.addEventListener("mousemove",(function(){a=!0})),player.el_.addEventListener("mousedown",(function(){a=!0,clearInterval(t),t=setInterval((function(){a=!0}),250)})),player.el_.addEventListener("mouseup",(function(){a=!0,clearInterval(t)})),player.el_.addEventListener("keydown",(function(){a=!0})),player.el_.addEventListener("keyup",(function(){a=!0})),setInterval((function(){a&&(a=!1,player.changeForUserActivity(!0),clearTimeout(e),e=setTimeout((function(){a||player.changeForUserActivity(!1)}),2e3))}),250)},player.listenForUserActivity(),player.video.onclick=function(){ismobile.any||(this.tabIndex=1,player.controlBar.playToggle.onclick())},player.textTrack.onclick=function(){player.video.click()},player.el_.onclick=function(e){ismobile.phone||ismobile.tablet||(this.tabIndex=0)},player.el_.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),player.displayContext(e)},player.el_.onkeydown=function(e){if(!player.board.active&&!player.happy){e.preventDefault(),player.sendMessageToEmbed({hotkey:[e.which,e.ctrlKey]});var t=player.video.currentTime,a=player.video.volume;switch(e.which){case 32:case 75:if(player.ads)return;player.video.paused?player.video.play():player.video.pause();break;case 37:e.ctrlKey?t-=60:t-=10,(player.video.currentTime<=10||t<0)&&(t=0),player.video.currentTime=t;break;case 39:e.ctrlKey?t+=60:t+=10,t>=player.video.duration&&(t=player.video.duration),player.video.currentTime=t;break;case 40:(a-=.1)<0&&(a=0),player.video.volume=a,player.controlBar.volumeControl.volumeLevel.volumeHolder.update(void 0,a);break;case 38:(a+=.1)>1&&(a=1),player.video.volume=a,player.controlBar.volumeControl.volumeLevel.volumeHolder.update(void 0,a);break;case 77:player.video.muted?player.video.muted=!1:player.video.muted=!0,player.controlBar.volumeControl.volumeLevel.volumeHolder.update();break;case 70:case 13:player.isFullscreen()?player.exitFullscreen():player.requestFullscreen();break;default:if(e.which>47&&e.which<59||e.which>95&&e.which<106){var r=48;e.which>95&&(r=96),e.preventDefault(),player.video.currentTime=player.video.duration*(e.which-r)*.1}}}},player.contextMenu.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},player.controlBar.playToggle.onclick=function(){if(!player.embed)return player.video.paused?(player.video.play(),void(player.init=!1)):void player.video.pause();player.paused||null==player.paused?player.sendMessageToEmbed({play:!0}):player.sendMessageToEmbed({pause:!0})},player.controlBar.prevControl.onclick=function(){if(episode.meta.previous)try{getEpisode(!0,episode.meta.previous.id)}catch(e){}},player.controlBar.nextControl.onclick=function(){if(episode.meta.next)try{getEpisode(!0,episode.meta.next.id)}catch(e){}},player.controlBar.rewindControl.onclick=function(){if(player.embed)player.sendMessageToEmbed({rewind:!0});else{if(player.video.currentTime<10)return;player.video.currentTime-=10}},player.controlBar.forwardControl.onclick=function(){if(player.embed)player.sendMessageToEmbed({forward:!0});else{if(player.video.currentTime>=player.video.duration)return;player.video.currentTime+=10}},player.controlBar.volumeControl.volumeToggle.onclick=function(){player.muteVideo(),player.audio&&(player.audio.muted=player.video.muted),player.controlBar.volumeControl.volumeLevel.volumeHolder.update()},player.controlBar.volumeControl.volumeLevel.volumeHolder.onclick=function(e){player.controlBar.volumeControl.volumeLevel.volumeHolder.update(e.clientY)},player.controlBar.volumeControl.volumeLevel.volumeHolder.onmousedown=function(e){player.video.muted=!1,document.addEventListener("mousemove",player.updateVolumeStyle),document.addEventListener("touchmove",player.updateVolumeStyle)},player.controlBar.volumeControl.volumeLevel.volumeHolder.onmouseup=function(e){document.removeEventListener("mousemove",player.updateVolumeStyle,!1),document.removeEventListener("touchmove",player.updateVolumeStyle,!1)},player.controlBar.progressControl.progressHolder.onmousemove=function(e){var t,a,r=this.getBoundingClientRect(),l=this.offsetWidth,i=(e.clientX-r.left)/l,n=0;n=player.embed?player.duration:player.video.duration,i<0&&(i=0),t=player.round(100*i,2),a=player.formatTime(Math.round(i*n)),player.controlBar.progressControl.tip.style.left=t+"%",player.controlBar.progressControl.tip.innerHTML="<span>"+a+"</span>"},player.controlBar.progressControl.progressHolder.onclick=function(e){if(!player.happy){var t=0;if(player.embed){if(!player.duration)return;t=player.duration}else{if(!player.video.duration)return;t=player.video.duration}var a=player.controlBar.progressControl.getBoundingClientRect(),r=player.controlBar.progressControl.offsetWidth,l=e.clientX-a.left,i=l/r,n=Math.round(i*t);player.embed?player.sendMessageToEmbed({currentTime:n}):player.video.currentTime=n,l>r||i<0||player.controlBar.progressControl.progressHolder.update(l,r)}},player.controlBar.progressControl.progressHolder.onmousedown=function(){ismobile.tablet||(document.addEventListener("mousemove",player.updateProgressStyle),player.embed||(player.cache_.paused=player.video.paused))},player.controlBar.progressControl.progressHolder.onmouseup=function(e,t){ismobile.tablet||(document.removeEventListener("mousemove",player.updateProgressStyle,!1),t&&t.outside||player.embed||(player.cache_.paused?player.video.pause():player.video.play()))},player.controlBar.lightToggle.onclick=function(){player.controlBar.lightToggle.on?(player.controlBar.lightToggle.on=!1,player.controlBar.lightToggle.tip.innerHTML="Tắt đèn"):(player.controlBar.lightToggle.on=!0,player.controlBar.lightToggle.tip.innerHTML="Bật đèn"),player.controlBar.lightToggle.update()},player.controlBar.downloadControl.onclick=function(e){e.stopPropagation();var t=0;try{t=navigator.userAgent.match(/(CriOS|Chrome|Firefox|Safari|Opera(?=\/))\/?\s*(\d+)/i)[2]}catch(e){}if(ismobile.any){if(!(ismobile.other.firefox&&t>54||ismobile.other.chrome&&t>60||ismobile.other.opera&&t>48))return void alert("Trình duyệt không hỗ trợ download");console.log("downloading...")}var a=document.createElement("a");if(a.href=player.video.currentSrc,a.download=player.episode.full_name,document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),a.dispatchEvent(r)}else alert("Trình duyệt không hỗ trợ download")},player.controlBar.settingControl.onclick=function(e){player.board.active?(player.board.active=!1,player.el_.classList.remove("player-show-board")):(player.board.active=!0,player.el_.classList.add("player-show-board"))},player.controlBar.largeToggle.onclick=function(){playerWrapper.classList.contains("large-mode")?(playerWrapper.classList.remove("large-mode"),this.icon.className="icon-maximise",this.tip.innerHTML="<span>Mở rộng player</span>"):(playerWrapper.classList.add("large-mode"),this.icon.className="icon-minimise",this.tip.innerHTML="<span>Thu nhỏ player</span>"),playerWrapper.style="",resizePlayerByVideoResolution()},player.controlBar.fullscrenToggle.onclick=function(){if(!player.isFullscreen())return player.requestFullscreen(),void player.sendMessageToEmbed({fullscreen:!0});player.exitFullscreen(),player.sendMessageToEmbed({exitFullscreen:!0})},player.board.selector.input.onkeyup=function(e){if(this.value<parseInt(film.min)||this.value>parseInt(film.max))player.board.selector.button.classList.add("disabled");else{try{13==e.which&&player.board.selector.button.onclick()}catch(e){}player.board.selector.button.classList.remove("disabled")}},player.board.selector.input.onmouseup=function(){player.board.selector.input.onkeyup()},player.board.selector.button.onclick=function(){this.classList.contains("disabled")||player.board.selector.input.value<parseInt(film.min)||player.board.selector.input.value>parseInt(film.max)||getEpisode(!1,player.board.selector.input.value,{name:player.board.selector.input.value})},player.video.addEventListener("pause",(function(){player.el_.classList.add("player-paused"),player.el_.classList.remove("player-playing"),player.controlBar.playToggle.icon.className="icon-play",player.controlBar.playToggle.tip.innerHTML="<span>Phát</span>"})),player.video.addEventListener("play",(function(){player.el_.classList.add("player-playing"),player.el_.classList.remove("player-paused"),player.el_.classList.remove("player-ended"),player.controlBar.playToggle.icon.className="icon-pause",player.controlBar.playToggle.tip.innerHTML="<span>Dừng</span>",player.init=!1,player.error.code=0,cachedError[player.episode.id]=0,cachedErrorPT[player.episode.id]=0})),player.video.addEventListener("ended",(function(){player.el_.classList.add("player-ended"),ismobile.apple.device&&this.webkitExitFullscreen(),episode.meta.next&&getEpisode(!0,episode.meta.next.id,{name:episode.meta.next.name})})),player.video.addEventListener("webkitenterfullscreen",(function(){player.ios.fullscreen=!0,player.episode.subtitle&&player.episode.subtitle.active>=0&&(player.video.textTracks[player.episode.subtitle.active].mode="showing")})),player.video.addEventListener("webkitbeginfullscreen",(function(){player.ios.fullscreen=!0,player.episode.subtitle&&player.episode.subtitle.active>=0&&(player.video.textTracks[player.episode.subtitle.active].mode="showing")})),player.video.addEventListener("webkitendfullscreen",(function(){if(player.ios.fullscreen=!1,player.episode.subtitle){var e=!1;player.board.caption.off.classList.remove("active");for(var t=0;t<player.video.textTracks.length;t++){try{player.board.caption[player.video.textTracks[t].language].classList.remove("active")}catch(e){}if("showing"==player.video.textTracks[t].mode){e=!0,player.episode.subtitle.active=t,player.textTrack.classList.remove("hidden");try{player.board.caption[player.video.textTracks[t].language].classList.add("active")}catch(e){}player.cues_=player.video.textTracks[t].cues,player.updateCue()}player.video.textTracks[t].mode="hidden"}e||(player.episode.subtitle.active=-1,player.textTrack.classList.add("hidden"),player.board.caption.off.classList.add("active"),player.cues_=[])}})),player.video.addEventListener("seeking",player.showLoadingSpinner),player.video.addEventListener("waiting",player.showLoadingSpinner),player.video.addEventListener("canplay",player.hideLoadingSpinner),player.video.addEventListener("canplaythrough",player.hideLoadingSpinner),player.video.addEventListener("playing",player.hideLoadingSpinner),player.video.addEventListener("seeked",player.hideLoadingSpinner),player.video.addEventListener("ended",player.hideLoadingSpinner),player.video.addEventListener("play",player.hideLoadingSpinner),player.video.addEventListener("pause",player.hideLoadingSpinner),player.video.addEventListener("error",player.displayError),player.video.ontimeupdate=function(){if(!player.embed){if(this.currentTime&&(player.cache_.currentTime=this.currentTime),player.controlBar.currentTime.innerHTML="<span>"+player.formatTime(this.currentTime),player.controlBar.duration.innerHTML="<span>"+player.formatTime(this.duration),player.controlBar.progressControl.progressHolder.update(this.currentTime,this.duration),this.currentTime>10&&this.currentTime+120<this.duration)try{store.set("current-time-"+player.episode.id,this.currentTime)}catch(e){}if(player.episode.subtitle){if(player.updateCue(),!player.isFullscreen())return;player.updateTextTrackPosition(!0)}}},player.video.onvolumechange=function(){try{store.set("volume",this.volume)}catch(e){}},player.video.addEventListener("timeupdate",setMidroll),document.addEventListener("click",(function(e){var t=e.target,a={board:!0};for(player.controlBar.lightToggle.update(t);t!=document.body;)try{t.classList.contains("player-setting-control")&&(a.board=!1),t.classList.contains("player-board-item")&&(a.board=!1),t=t.parentNode}catch(e){break}a.board&&(player.board.active=!1,player.el_.classList.remove("player-show-board"));try{if(3==e.which)return}catch(e){}player.contextMenu.style.display="none"})),document.addEventListener("mouseup",(function(e){player.controlBar.volumeControl.volumeLevel.style="",player.controlBar.volumeControl.volumeLevel.volumeHolder.onmouseup(e),player.controlBar.progressControl.progressHolder.onmouseup(e,{outside:!0})})),document.addEventListener("webkitfullscreenchange",player.updateFullscreenState),document.addEventListener("mozfullscreenchange",player.updateFullscreenState),document.addEventListener("msfullscreenchange",player.updateFullscreenState),document.addEventListener("fullscreenchange",player.updateFullscreenState),player.controlBar.lightToggle.update=function(e){var t=document.querySelector(".light-overlay");if(void 0!==e){if(!t)return;for(;e!=document.body;){if("fimfast-player"==e.id)return;e=e.parentNode}}t?t.classList.contains("active")?(t.classList.remove("active"),setTimeout((function(){if(t&&"light-overlay"===t.className)try{document.body.removeChild(t),player.el_.classList.remove("light-on")}catch(e){}}),500)):(t.classList.add("active"),player.el_.classList.add("light-on")):((t=document.createElement("div")).className="light-overlay",document.body.appendChild(t),player.el_.classList.add("light-on"),setTimeout((function(){t&&t.classList.add("active")}),10))},player.controlBar.volumeControl.volumeLevel.volumeHolder.update=function(e,t){var a=0;t&&(a=t),void 0!==e&&((e=this.getBoundingClientRect().bottom-e)<0?e=0:e>this.offsetHeight&&(e=this.offsetHeight),a=player.round(e/this.offsetHeight,2),player.embed?(player.volume=a,player.sendMessageToEmbed({volume:a})):player.video.volume=a),a||player.isMuted()||(a=player.embed?player.volume:player.video.volume),player.controlBar.volumeControl.volumeToggle.icon.className=a>=.5?"icon-volume-up":a>.05?"icon-volume-down":"icon-volume-mute";var r=(a*=100)-player.controlBar.volumeControl.volumeLevel.volumeHolder.volumeHandle.offsetHeight/player.controlBar.volumeControl.volumeLevel.volumeHolder.offsetHeight*100;r<0&&(r=0),player.controlBar.volumeControl.volumeLevel.volumeHolder.volumeCurrent.style.height=a+"%",player.controlBar.volumeControl.volumeLevel.volumeHolder.volumeHandle.style.bottom=r+"%"},player.controlBar.progressControl.progressHolder.update=function(e,t){var a=e/t,r=player.controlBar.progressControl.offsetWidth,l=a*(1-player.controlBar.progressControl.progressHolder.seekHandle.offsetWidth/r);player.round(100*l,2);player.controlBar.progressControl.progressHolder.playProgress.style.width=player.round(100*a,2)+"%",player.controlBar.progressControl.progressHolder.seekHandle.style.left=player.round(100*l,2)+"%"},player.el_.classList.add("player-waiting"),getEpisode(!0,film.episodeId);var l=[.25,.5,1,1.5,2];for(a=0;a<l.length;a++){var i=player.createPlaybackRateItem(l[a]);player.board.speed.appendChild(i),1==l[a]&&(player.board.speed.active=i)}var n=setInterval((function(){if(player.embed)return!1;var e=player.video.buffered.length-1,t=player.video.duration;if(e<0)return!1;var a=player.video.buffered.end(e);if(a>=t)return player.controlBar.progressControl.progressHolder.loadProgress.style.width="100%",clearInterval(n),!1;var r=player.round(a/t*100,2);player.controlBar.progressControl.progressHolder.loadProgress.style.width=r+"%"}),500)}function resizePlayerByVideoResolution(){if(cachedWindow&&player){try{var e,t;window.innerWidth!=cachedWindow.innerWidth&&(playerWrapper.style="",cachedWindow.innerWidth=window.innerWidth),player.embed?(e=player.videoWidth,t=player.videoHeight):(e=player.video.videoWidth,t=player.video.videoHeight),playerWrapper.style.height=Math.floor(playerWrapper.offsetWidth*(t/e))+"px"}catch(e){console.log(e)}try{if(player.isFullscreen())return void player.updateTextTrackPosition(!0);player.updateTextTrackPosition(!1)}catch(e){}}}function popState(e){onpopstateTimeout=setTimeout((function(e){try{e.state&&getEpisode(!0,e.state.episodeId,{onpopstate:!0})}catch(e){}}),100)}function playVideoFromEpisode(e,t){var a,r,l=[],i=!1;if(player.episode=e,e.hls=setM3u8Data(e.sources.m3u8),e.hls.length&&(e.sources.hls=e.hls[0].url),e.hls||(e.hls=[]),e.title||(e.title=film.name+" "+e.full_name),r={episodeId:e.id,title:e.title,link:e.link},t||(t={}),!film.type&&(document.title=e.title,player.title.innerHTML="<span>"+e.title+"</span>",getElement(".film-info-title").innerHTML=film.name+" "+e.full_name.split("-")[0],!t.onpopstate&&e.link!=window.location.pathname))try{history.pushState(r,e.title,e.link)}catch(e){}for(var n=getAllElements(".player-content"),o=0;o<n.length;o++)n[o].classList.add("hidden");if(updatePlayerSetting(e),e.upcoming)countdownTimer(e.id,e.full_name,e.upcoming);else{var s=[];e.sources.gd.length;a="720p";var c={"360p":!1,"480p":!1,"720p":!1,"1080p":!1},d=!1,p=!1,u=null;if(e.sources.fb.length)for(o=0;o<e.sources.fb.length;o++)c[e.sources.fb[o].quality]||(l.push(e.sources.fb[o]),c[e.sources.fb[o].quality]=!0,"720p"==e.sources.fb[o].quality&&(p=!0,u=e.sources.fb[o]));if(e.sources.yt.length)for(o=0;o<e.sources.yt.length;o++)-1!=e.sources.yt[o].src.indexOf("redirector")&&(c[e.sources.yt[o].quality]||("origin"==e.sources.yt[o].quality?(e.sources.yt[o].quality="auto",l.unshift(e.sources.yt[o])):(l.push(e.sources.yt[o]),"720p"==e.sources.yt[o].quality&&(p=!0,u=e.sources.yt[o])),c[e.sources.yt[o].quality]=!0));if(e.sources.mp4){var y=[],v=e.sources.mp4.split("|");for(o=0;o<v.length;o++){var m=v[o],h="auto";if(-1!=v[o].indexOf(".mp4_")){var g=v[o].split(".mp4_");m=g[0]+".mp4",h=g[1]}y[o]={src:m,type:"video/mp4",quality:h}}e.sources.pt=y}try{e.sources.pt.length&&(e.sources.pt.sort((function(e,t){return parseInt(e.quality)<parseInt(t.quality)?-1:parseInt(e.quality)>parseInt(t.quality)?1:0})),d=!0)}catch(e){}for(o=0;o<l.length;o++)s[l[o].quality]=!0,p||(p=!0,u=l[o]);l.sort((function(e,t){return parseInt(e.quality)<parseInt(t.quality)?-1:parseInt(e.quality)>parseInt(t.quality)?1:0})),player.cache_.sources=l;if(!(l.length||e.sources.mp4||e.sources.m3u8.hls||e.sources.m3u8.htt||e.sources.m3u8.hdp))return player.el_.classList.add("player-paused"),player.el_.classList.add("player-error"),player.el_.classList.remove("player-waiting"),void(player.error.message.innerHTML="Tập phim đang gặp lỗi!");if(film.copyrighted>0&&!_GLOBAL._IS_VIP)return!0,player.video.pause(),player.el_.classList.add("player-blocked"),player.el_.classList.add("player-error"),player.el_.classList.remove("player-waiting"),void(player.error.message.innerHTML="NGƯNG CHIẾU PHIM NÀY THEO YÊU CẦU BÊN GIỮ BẢN QUYỀN");if("vn"!=e.meta.country&&"VN"!=e.meta.country)return!0,player.video.pause(),player.el_.classList.add("player-blocked"),player.el_.classList.add("player-error"),player.el_.classList.remove("player-waiting"),void(player.error.message.innerHTML="PHIM CHỈ CHIẾU Ở VIỆT NAM");player.el_.classList.remove("player-blocked");var f=!1;player.servers=[];for(o=0;o<e.hls.length;o++)player.setServerData(e.hls[o]);if(player.servers.vn?(player.createServerItem(player.servers.vn),getElement(".setting-server-item.server-8").classList.add("active"),p=!1,u&&(player.servers.fb={server:3,label:"US",mp4:!0,source:u,sources:l},player.board.server.classList.remove("hidden"),player.createServerItem(player.servers.fb))):e.sources.fb.length||u&&(p=!1,player.servers.fb={server:3,label:"US",mp4:!0,source:u,sources:l},player.board.server.classList.remove("hidden"),player.createServerItem(player.servers.fb)),player.servers.sg&&(player.servers.sg.default=!0,player.board.server.classList.remove("hidden"),player.createServerItem(player.servers.sg)),player.servers.hn&&(player.servers.sg&&(player.servers.hn.default=!1),player.createServerItem(player.servers.hn)),d&&(player.servers.pt={server:4,label:"EU",sources:e.sources.pt},player.board.server.classList.remove("hidden"),player.createServerItem(player.servers.pt)),p){var b=document.querySelectorAll(".setting-server-item");for(o=0;o<b.length;o++)b[o].classList.remove("active");player.servers.fb={server:-1,label:"FB",default:!0,mp4:!0,source:u,sources:l},player.board.server.classList.remove("hidden"),player.createServerItem(player.servers.fb),f=!1}else if(d){try{getElement(".setting-server-item.active").classList.remove("active"),getElement(".setting-server-item.server-4").classList.add("active")}catch(e){}playEmbedMp4(player,e,e.sources.pt),f=!0}else(e.sources.hls||e.sources.htt||e.sources.hff)&&(player.servers.sg&&!f&&playHLS(player,e,l,{m3u8:player.servers.sg.m3u8})&&(f=!0),player.servers.hn&&!f&&playEmbed(player,e,l,{m3u8:player.servers.hn.m3u8,auto:t.auto,vn:!0})&&(f=!0),player.servers.vn&&!f&&playEmbed(player,e,l,{m3u8:player.servers.vn.m3u8,auto:t.auto,vn:!0})&&(f=!0));if(!f){for(o=0;o<l.length;o++)l[o].quality==a&&(i=!0,l[o].default=!0,player.video.src=l[o].src),player.createQualityItem(l[o]);if(player.board.quality.classList.remove("hidden"),!l.length)return player.el_.classList.add("player-paused"),player.el_.classList.add("player-error"),player.el_.classList.remove("player-waiting"),void(player.error.message.innerHTML="Tập phim đang gặp lỗi, vui lòng thử lại.");player.cache_.quality=a,i||(player.video.src=l[0].src,player.cache_.quality=l[0].quality,player.board.quality[l[0].quality].classList.add("active")),player.video.addEventListener("loadedmetadata",(function(){resizePlayerByVideoResolution()})),c["720p"]&&c["1080p"]||addHLSQuality(player,e.sources.hls,c)}player.el_.classList.remove("player-waiting");var L=store.get("current-time-"+e.id);player.video.addEventListener("loadedmetadata",(function t(){if(player.video.removeEventListener("loadedmetadata",t,!1),L>60&&L+120<player.video.duration)try{player.video.currentTime=store.get("current-time-"+e.id)}catch(e){}})),film.type||null==e.quality?unfreezePlayer(e,t):freezePlayer(e,t)}}function freezePlayer(e,t){if(player.video.pause(),player.embedWindow&&player.embedWindow.postMessage({pause:!0},"*"),null!=e.quality){var a=getPlayerNotice(e.quality,e.audio);if(a.length){var r=createElementByJs("content","div","player-content",{childrens:[{identity:"thumbnail",tag:"img",className:"player-thumbnail",options:{},properties:[{identity:"src",value:"/assets/img/countdown-bg.png"}]},{identity:"upcoming",tag:"div",className:"player-upcoming",options:{innerHTML:"Tập này "+a}},{identity:"direction",tag:"div",className:"player-direction",options:{innerHTML:'<button class="direction-video">Xem luôn</button>'}}]});r.direction.onclick=function(){unfreezePlayer(e,t)},player.el_.appendChild(r)}else unfreezePlayer(e,t)}else unfreezePlayer(e,t)}function unfreezePlayer(e,t){for(var a=getAllElements(".player-content"),r=0;r<a.length;r++)a[r].classList.add("hidden");if(_GLOBAL._IS_VIP||!e.meta.ads.preroll.data.length||t.noads)player.video.load(),player.video.play(),player.embedWindow&&player.embedWindow.postMessage({play:!0},"*");else{player.video.pause(),player.embedWindow&&player.embedWindow.postMessage({pause:!0},"*");try{e.meta.ads.preroll.data=shuffle(e.meta.ads.preroll.data),e.meta.ads.midroll.data=shuffle(e.meta.ads.midroll.data)}catch(e){}if(player.options_.ads={preroll:e.meta.ads.preroll.data,midroll:e.meta.ads.midroll.data},player.midpoint=!1,player.options_.ads.midroll.length&&(e.midroll?player.options_.ads.midroll[0].time=e.midroll:player.options_.ads.midroll[0].time=600,player.options_.ads.midroll[1]&&(e.midroll2?player.options_.ads.midroll[1].time=e.midroll2:player.options_.ads.midroll[1].time=1200)),e.meta.ads.preroll.data[0].type>4)if(!Math.floor(Math.random()*Math.floor(2))){var l=e.meta.ads.preroll.data[0].url;e.meta.ads.preroll.data[0].url=e.meta.ads.preroll.data[0].backup,e.meta.ads.preroll.data[0].backup=l}getAds(e.meta.ads.preroll.data[0].url,"preroll",0,{backup:e.meta.ads.preroll.data[0].backup})}}function setM3u8Data(e){var t=[],a=0;return e?(e.hdp&&(t[a]={url:encodeString(e.hdp,69),play:!1,server:"hdp"},a++),e.hff&&(t[a]={url:encodeString(e.hff,69),play:!1,server:"hff"},a++),e.hls&&(t[a]={url:encodeString(e.hls,69),play:!1,server:"hls"},a++),e.htt&&(t[a]={url:encodeString(e.htt,69),play:!1,server:"hls"},a++),t):t}function playHLS(e,t,a,r){if(!Hls)return!1;r||(r={});var l="720p",i=!0,n=t.sources.hls;if(r.m3u8&&(n=r.m3u8),!n)return!1;e.el_.classList.add("player-waiting"),e.el_.classList.remove("player-error");for(var o=0;o<t.hls.length;o++)t.hls[o].url==n&&(t.hls[o].play=!0);if(!Hls.isSupported()&&!e.video.canPlayType("application/vnd.apple.mpegurl"))return!1;if(Hls.isSupported()){var s=null;window.p2pdebug=!1;try{p2pml.hlsjs.Engine.isSupported()&&!ismobile.tv&&(s=new p2pml.hlsjs.Engine,e.hls=new Hls({fragLoadingTimeOut:15e3,loader:s.createLoaderClass()}),p2pml.hlsjs.initHlsJsPlayer(e.hls),s.on(p2pml.core.Events.PieceBytesDownloaded,(function(e){window.p2pdebug&&console.log("download "+e)})),s.on(p2pml.core.Events.PieceBytesUploaded,(function(e){window.p2pdebug&&console.log("upload"+e)})),s.on(p2pml.core.Events.PeerConnect,(function(e){window.p2pdebug&&console.log(e)})))}catch(e){}s||(e.hls=new Hls({fragLoadingTimeOut:15e3}));try{e.hls.p2pDomain="https://"+n.split("/")[2],window.p2pDomain=e.hls.p2pDomain}catch(e){}return e.hls.loadSource(n),e.hls.attachMedia(e.video),e.hls.on(Hls.Events.MANIFEST_PARSED,(function(){console.log("play hls"),r.level?e.hls.currentLevel=r.level:e.hls.currentLevel=0;var a=store.get("current-time-"+t.id);if(a&&(e.video.currentTime=a),e.ads?e.video.pause():e.video.play(),null==r.level||null==r.level){if(e.removeQualityItems(),e.hls.levels.length)for(var l=0;l<e.hls.levels.length;l++)l||(e.hls.levels[l].default=!0),e.hls.levels[l].height>=360&&e.hls.levels[l].height<=1080&&(e.hls.levels[l].level=l,e.hls.levels[l].quality=e.hls.levels[l].height+"p",e.createQualityItem(e.hls.levels[l]));e.board.quality.classList.remove("hidden")}resizePlayerByVideoResolution(),e.episode.duration||setEpisodeDuration(e.episode.id,e.video.duration)})),e.hls.on(Hls.Events.ERROR,(function(r,o){if(console.log(o.details),"manifestParsingError"==o.details)try{return void e.hls.recoverMediaError()}catch(e){}if("manifestLoadTimeOut"!=o.details&&"manifestLoadError"!=o.details)switch(o.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("hls media error");try{if(cachedError[e.episode.id]>30){var s=e.hls.levels.length;if(2048==e.hls.levels[s-1].height){if(s>1)return void(e.hls.currentLevel=1);e.hls.currentLevel=0}return}}catch(e){}cachedError[e.episode.id]++,errorStatus=Hls.ErrorTypes.MEDIA_ERROR;break;case Hls.ErrorTypes.NETWORK_ERROR:console.log("hls network error");try{e.hls.startLoad()}catch(e){}cachedError[e.episode.id]++,errorStatus=Hls.ErrorTypes.NETWORK_ERROR}else!function(r){r||(r={});if(ismobile.tv)return alert("Lỗi load video trên thiết bị, đang thử lại ..."),void window.location.reload();console.log("destroy hls"),console.log(i),errorStatus="",e.removeQualityItems(),e.hls.destroy(),e.hls=null,cachedError[t.id]=0;for(var o=0;o<t.hls.length;o++)if(!t.hls[o].play){n=t.hls[o].url;try{e.hls.p2pDomain="https://"+n.split("/")[2],window.p2pDomain=e.hls.p2pDomain}catch(e){}return playHLS(e,t,a,{driveHLS:!0}),void console.log("switch hls")}for(o=0;o<a.length;o++)a[o].quality==l&&(!0,a[o].default=!0,e.video.src=a[o].src),e.createQualityItem(a[o]);e.board.quality.classList.remove("hidden")}()})),!0}if(e.video.canPlayType("application/vnd.apple.mpegurl")){null!=r.level&&null!=r.level||e.removeQualityItems(),r.src?e.video.src=r.src:e.video.src=n,i=!0;var c=store.get("current-time-"+t.id);if(c&&(e.video.currentTime=c),e.video.load(),(null==r.level||null==r.level)&&(e.board.quality.classList.remove("hidden"),i)){e.createQualityItem({level:-1,quality:"auto",default:!0,src:n});try{var d=n.split("/")[2],p=new XMLHttpRequest;p.open("GET",n),p.send(),p.onload=function(){var t=p.responseText.split("#EXT-X-STREAM-INF:BANDWIDTH=");if(t.length>2){for(var a=[],r=1;r<t.length;r++)try{var l=t[r].split("\n"),i=l[0].substr(-4).replace("x","");i>=480&&i<=1080&&a.push({quality:i+"p",src:"https://"+d+l[1],type:"video/mp4"})}catch(e){}a.sort((function(e,t){return parseInt(e.quality)<parseInt(t.quality)?-1:parseInt(e.quality)>parseInt(t.quality)?1:0}));for(r=0;r<a.length;r++)e.createQualityItem(a[r])}}}catch(e){}}return!0}}function playEmbed(e,t,a,r){var l=t.sources.hls;if(r.m3u8&&(l=r.m3u8),!l)return!1;e.el_.classList.add("player-waiting"),e.el_.classList.remove("player-error"),e.embed=document.createElement("iframe"),e.embed.className="player-embed",e.embed.id="embed-"+t.id,t.sources.hls=t.sources.hls.replace("vdicdn.com","phim1080z.com"),r.vn?e.embed.src="/embed/vn.html?url="+l:e.embed.src="/embed/?url="+l,t.subtitle.vi&&(e.embed.src+="&subtitle_vi="+t.subtitle.vi),t.subtitle.en&&(e.embed.src+="&subtitle_en="+t.subtitle.en),e.embed.src+="&title="+document.title,e.el_.appendChild(e.embed);var i=e.embed.contentWindow;e.embedWindow=i;var n=store.get("current-time-"+t.id),o=1;try{store.get("volume")?o=store.get("volume"):(o=1,store.set("volume",1))}catch(e){}e.listenMessage=function(a){if(a.data.loadstart&&(i.postMessage({currentTime:n,volume:o},"*"),i.postMessage({play:!0},"*"),e.video.pause()),a.data.play){if(window.innerWidth<1024)return;i.postMessage({play:!0},"*")}if(a.data.pause){if(window.innerWidth<1024)return;i.postMessage({pause:!0},"*")}if(a.data.error)try{removeElement(getElement(".setting-server-item.active")),getElement(".setting-server-item").click()}catch(a){}if(a.data.levels){var s=360,c=a.data.levels;e.board.quality.classList.remove("hidden"),ismobile.apple.device?(s=480,e.createQualityItem({level:-1,quality:"auto",default:!0,src:l})):(c.length&&!r.io&&(c[0].default=!0),!c.length||r.vn||r.io?(s=480,e.createQualityItem({level:-1,quality:"auto",default:!0})):e.createQualityItem({level:-1,quality:"auto"}));for(var d=0;d<c.length;d++)if(c[d].height>=s&&c[d].height<=1080){c[d].level=d,c[d].quality=c[d].height+"p";try{c[d].src=c[d].url[0]}catch(a){}e.createQualityItem(c[d])}}if(a.data.event){var p=a.data.event;"play"==p||"playing"==p?(e.paused=!1,e.hideLoadingSpinner(),e.el_.classList.add("player-playing"),e.el_.classList.remove("player-paused"),e.el_.classList.remove("player-ended"),e.controlBar.playToggle.icon.className="icon-pause",e.controlBar.playToggle.tip.innerHTML="<span>Dừng</span>"):"pause"==p?(e.paused=!0,e.hideLoadingSpinner(),e.el_.classList.add("player-paused"),e.el_.classList.remove("player-playing"),e.controlBar.playToggle.icon.className="icon-play",e.controlBar.playToggle.tip.innerHTML="<span>Phát</span>"):"canplay"==p||"canplaythrough"==p||"seeked"==p?e.hideLoadingSpinner():"seeking"==p||"waiting"==p?e.showLoadingSpinner():"ended"==p&&(e.hideLoadingSpinner(),e.el_.classList.add("player-ended"),ismobile.apple.device&&i.postMessage({exitFullscreen:!0},"*"),t.meta.next&&getEpisode(!0,t.meta.next.id,{name:t.meta.next.name}))}if("play"==a.data.event&&e.episode.subtitle&&e.updateCue(),a.data.currentTime&&(e.controlBar.currentTime.innerHTML="<span>"+e.formatTime(a.data.currentTime),e.controlBar.duration.innerHTML="<span>"+e.formatTime(a.data.duration),e.controlBar.progressControl.progressHolder.update(a.data.currentTime,a.data.duration),e.currentTime=a.data.currentTime,e.duration=a.data.duration,e.episode.subtitle&&e.updateCue(),setMidroll(),a.data.currentTime>10&&a.data.currentTime+120<a.data.duration))try{store.set("current-time-"+e.episode.id,a.data.currentTime)}catch(a){}a.data.loaded&&(e.controlBar.progressControl.progressHolder.loadProgress.style.width=a.data.loaded+"%"),a.data.videoWidth&&(e.videoWidth=a.data.videoWidth,e.videoHeight=a.data.videoHeight,resizePlayerByVideoResolution()),a.data.userActive&&e.el_.classList.remove("user-inactive"),a.data.userInactive&&e.el_.classList.add("user-inactive"),null!=a.data.volume&&e.controlBar.volumeControl.volumeLevel.volumeHolder.update(void 0,a.data.volume),0==a.data.muted&&(e.muted=!1),1==a.data.muted&&(e.muted=!0,e.controlBar.volumeControl.volumeLevel.volumeHolder.update()),a.data.toggleFullscreen&&e.controlBar.fullscrenToggle.click()},e.setSpeed=function(e){var t=e.innerText;e.addEventListener("click",(function(){i.postMessage({speed:t},"*")}))};for(var s=document.querySelectorAll(".setting-speed-item"),c=0;c<s.length;c++)e.setSpeed(s[c]);return window.addEventListener("message",e.listenMessage),!0}function addHLSQuality(e,t,a){if(Hls&&t){a||(a=[]);try{var r=t.split("/")[2],l=[],i=new XMLHttpRequest;i.open("GET",t),i.send(),i.onload=function(){var t=i.responseText.split("#EXT-X-STREAM-INF:BANDWIDTH=");if(t.length>2){for(var n=[],o=1;o<t.length;o++)try{var s=t[o].split("\n"),c=s[0].substr(-4).replace("x","");l[c]=!0,n.push({quality:c+"p",src:"https://"+r+s[1],type:"video/mp4"})}catch(e){}n.sort((function(e,t){return parseInt(e.quality)<parseInt(t.quality)?-1:parseInt(e.quality)>parseInt(t.quality)?1:0}));var d=0,p=0,u=1;l[360]&&l[480]?(d=1,p=2):(l[360]&&!l[480]||!l[360]&&l[480])&&(d=0,p=1),u=l[720]?p+1:p;for(o=0;o<n.length;o++)"480p"!=n[o].quality||a["480p"]?"720p"!=n[o].quality||a["720p"]?"1080p"!=n[o].quality||a["1080p"]||(n[o].level=u,e.createQualityItem(n[o])):(n[o].level=p,e.createQualityItem(n[o])):(n[o].level=d,e.createQualityItem(n[o]))}}}catch(e){}}}function playEmbedMp4(e,t,a,r){r||(r={}),e.el_.classList.add("player-waiting"),e.el_.classList.remove("player-error"),e.embed=document.createElement("iframe"),e.embed.className="player-embed",e.embed.id="embed-"+t.id,e.board.quality.classList.remove("hidden");for(var l="",i=0;i<a.length;i++)a[i].level=i,a[i].mp4=!0,e.createQualityItem(a[i]),l=l+a[i].src+"_"+a[i].quality+"|";l=l.slice(0,-1),e.embed.src="/embed/rumble.html?url="+l,t.subtitle.vi&&(e.embed.src+="&subtitle_vi="+t.subtitle.vi),t.subtitle.en&&(e.embed.src+="&subtitle_en="+t.subtitle.en),e.embed.src+="&title="+document.title,e.el_.appendChild(e.embed);var n=e.embed.contentWindow;e.embedWindow=n;var o=store.get("current-time-"+t.id),s=1;try{store.get("volume")?s=store.get("volume"):(s=1,store.set("volume",1))}catch(e){}e.listenMessage=function(t){if(t.data.loadstart&&(n.postMessage({currentTime:o,volume:s},"*"),n.postMessage({play:!0},"*"),e.video.pause()),t.data.play){if(window.innerWidth<1024)return;n.postMessage({play:!0},"*")}if(t.data.pause){if(window.innerWidth<1024)return;n.postMessage({pause:!0},"*")}if(t.data.level)try{for(var a=document.querySelectorAll(".setting-quality-item"),r=0;r<a.length;r++)a[r].classList.remove("active");a[t.data.level].classList.add("active")}catch(t){}if(t.data.error)try{removeElement(getElement(".setting-server-item.active")),getElement(".setting-server-item").click()}catch(t){}if(t.data.event){var l=t.data.event;"play"==l||"playing"==l?(e.paused=!1,e.hideLoadingSpinner(),e.el_.classList.add("player-playing"),e.el_.classList.remove("player-paused"),e.el_.classList.remove("player-ended"),e.controlBar.playToggle.icon.className="icon-pause",e.controlBar.playToggle.tip.innerHTML="<span>Dừng</span>"):"pause"==l?(e.paused=!0,e.hideLoadingSpinner(),e.el_.classList.add("player-paused"),e.el_.classList.remove("player-playing"),e.controlBar.playToggle.icon.className="icon-play",e.controlBar.playToggle.tip.innerHTML="<span>Phát</span>"):"canplay"==l||"canplaythrough"==l||"seeked"==l?e.hideLoadingSpinner():"seeking"==l||"waiting"==l?e.showLoadingSpinner():"ended"==l&&(e.hideLoadingSpinner(),e.el_.classList.add("player-ended"),ismobile.apple.device&&n.postMessage({exitFullscreen:!0},"*"))}if("play"==t.data.event&&e.episode.subtitle&&e.updateCue(),t.data.currentTime&&(e.controlBar.currentTime.innerHTML="<span>"+e.formatTime(t.data.currentTime),e.controlBar.duration.innerHTML="<span>"+e.formatTime(t.data.duration),e.controlBar.progressControl.progressHolder.update(t.data.currentTime,t.data.duration),e.currentTime=t.data.currentTime,e.duration=t.data.duration,e.episode.subtitle&&e.updateCue(),setMidroll(),t.data.currentTime>10&&t.data.currentTime+120<t.data.duration))try{store.set("current-time-"+e.episode.id,t.data.currentTime)}catch(t){}t.data.loaded&&(e.controlBar.progressControl.progressHolder.loadProgress.style.width=t.data.loaded+"%"),t.data.videoWidth&&(e.videoWidth=t.data.videoWidth,e.videoHeight=t.data.videoHeight,resizePlayerByVideoResolution()),t.data.userActive&&e.el_.classList.remove("user-inactive"),t.data.userInactive&&e.el_.classList.add("user-inactive"),null!=t.data.volume&&e.controlBar.volumeControl.volumeLevel.volumeHolder.update(void 0,t.data.volume),0==t.data.muted&&(e.muted=!1),1==t.data.muted&&(e.muted=!0,e.controlBar.volumeControl.volumeLevel.volumeHolder.update()),t.data.toggleFullscreen&&e.controlBar.fullscrenToggle.click()},e.setSpeed=function(e){var t=e.innerText;e.addEventListener("click",(function(){n.postMessage({speed:t},"*")}))};var c=document.querySelectorAll(".setting-speed-item");for(i=0;i<c.length;i++)e.setSpeed(c[i]);return window.addEventListener("message",e.listenMessage),!0}function updatePlayerSetting(e,t){t||(t={});var a=1,r=document.querySelectorAll(".setting-server-item"),l=document.querySelectorAll(".setting-quality-item"),i=document.querySelectorAll(".caption-item"),n=document.querySelectorAll(".setting-speed-item"),o=document.querySelectorAll(".setting-font-item");if(""!=player.video.src){player.video.pause();try{player.video.removeAttribute("src")}catch(e){}}cachedError[e.id]=null,cachedErrorPT[e.id]=null,player.cache_={},player.cues_=[],player.resetCue();try{player.el_.classList.remove("embed-mode")}catch(e){}if(player.embed)try{player.el_.removeChild(player.embed),player.embed=null,player.embedWindow=null,window.removeEventListener("message",player.listenMessage,!1)}catch(e){}if(player.hls){try{player.hls.destroy()}catch(e){}player.hls=null}player.vast&&stopAds(),player.cache_={};try{store.get("volume")?a=store.get("volume"):(a=1,store.set("volume",1))}catch(e){}if(player.muted=!1,player.video.volume=a,player.controlBar.volumeControl.volumeLevel.volumeHolder.update(void 0,a),player.controlBar.progressControl.progressHolder.loadProgress.style.width=0,player.controlBar.progressControl.progressHolder.playProgress.style.width=0,!t.server){player.board.server.classList.add("hidden");for(var s=0;s<r.length;s++)removeElement(r[s])}player.board.quality.classList.add("hidden");for(s=0;s<l.length;s++)removeElement(l[s]);player.board.caption.classList.add("hidden");for(s=0;s<i.length;s++)removeElement(i[s]);for(s=0;s<n.length;s++)2!=s?n[s].classList.remove("active"):(n[s].classList.add("active"),player.board.speed.active=n[s]);for(s=0;s<o.length;s++)removeElement(o[s]);if(e.meta.previous?player.controlBar.prevControl.classList.remove("disabled"):player.controlBar.prevControl.classList.add("disabled"),e.meta.next?player.controlBar.nextControl.classList.remove("disabled"):player.controlBar.nextControl.classList.add("disabled"),player.board.selector.button.classList.remove("disabled"),film.type?player.board.selector.classList.add("hidden"):e.name>=0?player.board.selector.input.value=e.name:player.board.selector.input.value="",e.subtitle){if(player.textTrack.switch=!0,player.textTrack.classList.remove("hidden"),e.subtitle.vi||e.subtitle.en){var c,d="",p=_GLOBAL._URL,u=[40,50,60,70,80];ismobile.any&&(u=[15,20,25,30]);for(s=0;s<u.length;s++)y(s);function y(e){var t=createElementByJs("font"+e,"span","setting-font-item caption-size-"+e,{innerHTML:u[e]});t.onclick=function(){for(var a=0;a<u.length;a++)getElement(".caption-size-"+a).classList.remove("active");t.classList.add("active"),getElement(".player-cue").style.fontSize=u[e]+"px"},player.board.font.appendChild(t)}e.subtitle.vi&&(d='<track src="'+p+"/subtitle/"+e.subtitle.vi+'.vtt" kind="subtitles" srclang="vi" label="Tiếng Việt" default>',c=createElementByJs("vi","span","caption-item active",{innerHTML:"Việt"}),player.board.caption.appendChild(c),player.board.caption.vi=c,player.board.caption.vi.onclick=function(){if(this.classList.add("active"),player.textTrack.classList.remove("hidden"),player.board.caption.off.classList.remove("active"),player.board.caption.en&&player.board.caption.en.classList.remove("active"),player.embed&&player.sendMessageToEmbed({caption:"vi"}),e.cue.vi)return player.parseCues(e.cue.vi),player.textTrack.switch=!0,void player.updateCue();for(var t=0;t<player.video.textTracks.length;t++)if("vi"==player.video.textTracks[t].language){player.episode.subtitle.active=t,player.cues_=player.video.textTracks[t].cues,player.textTrack.switch=!0,player.updateCue();break}}),e.subtitle.en&&(""!=d?(d+='<track src="'+p+"/subtitle/"+e.subtitle.en+'.vtt" kind="subtitles" srclang="en" label="English">',c=createElementByJs("vi","span","caption-item",{innerHTML:"Anh"})):(d+='<track src="'+p+"/subtitle/"+e.subtitle.en+'.vtt" kind="subtitles" srclang="en" label="English" default>',c=createElementByJs("vi","span","caption-item active",{innerHTML:"Anh"})),player.board.caption.appendChild(c),player.board.caption.en=c,player.board.caption.en.onclick=function(){if(this.classList.add("active"),player.textTrack.classList.remove("hidden"),player.board.caption.off.classList.remove("active"),player.board.caption.vi&&player.board.caption.vi.classList.remove("active"),player.embed&&player.sendMessageToEmbed({caption:"en"}),e.cue.en)return player.parseCues(e.cue.en),player.textTrack.switch=!0,void player.updateCue();for(var t=0;t<player.video.textTracks.length;t++)if("en"==player.video.textTracks[t].language){player.episode.subtitle.active=t,player.cues_=player.video.textTracks[t].cues,player.textTrack.switch=!0,player.updateCue();break}}),ismobile.any&&(player.video.innerHTML=d),c=createElementByJs("off","span","caption-item",{innerHTML:"Tắt"}),player.board.caption.appendChild(c),player.board.caption.off=c,player.board.caption.off.onclick=function(){player.board.caption.vi&&player.board.caption.vi.classList.remove("active"),player.board.caption.en&&player.board.caption.en.classList.remove("active"),this.classList.add("active"),player.cues_=[],player.episode.subtitle.active=-1,player.textTrack.classList.add("hidden")};for(s=0;s<player.video.textTracks.length;s++)player.video.textTracks[s].mode="hidden";if(player.cues_=[],e.cue.vi&&(player.parseCues(e.cue.vi),player.episode.subtitle.active=0,player.updateCue()),!e.cue.vi&&e.cue.en&&(player.parseCues(e.cue.en),player.episode.subtitle.active=0,player.updateCue()),!player.cues_){for(s=0;s<player.video.textTracks[0].cues.length;s++)player.cues_.push(player.video.textTracks[0].cues[s]);player.episode.subtitle.active=0;var v=0,m=setInterval((function(){if(player.cues_.length>0||v>10)return console.log("set subtitle done!"),void clearInterval(m);console.log("try to set subtitle"),player.cues_=player.video.textTracks[0].cues,player.episode.subtitle.active=0,v++}),1e3)}player.board.caption.classList.remove("hidden"),ismobile.any||player.board.font.classList.remove("hidden")}e.subtitle.has_background&&player.textTrack.classList.add("has-background")}else player.textTrack.classList.add("hidden"),player.board.caption.classList.add("hidden"),player.board.font.classList.add("hidden")}function getAds(e,t,a,r){var l,i;console.log("get ads");var n="";try{n=e.split("/")[2]}catch(e){}try{e=(e=(e=(e=e.replace("[page_url]",encodeURIComponent(window.location.href))).replace("[width]",player.el_.offsetWidth)).replace("[height]",player.el_.offsetHeight)).replace("[timestamp]",(new Date).getTime())}catch(e){}player.vast||(player.vast={}),r||(r={}),player.vast.container||(l=createElementByJs("vastVideo","video","player-vast-video hidden",{},[{identity:"autoplay",value:""},{identity:"preload",value:"auto"},{identity:"playsinline",value:""},{identity:"webkit-playsinline",value:""}]),i=createElementByJs("vast","div","player-vast-container hidden",{childrens:[{identity:"vpaid",tag:"div",className:"player-vast-vpaid hidden"},{identity:"noskip",tag:"div",className:"player-vast-noskip hidden",options:{innerHTML:"Quảng cáo"}},{identity:"blocker",tag:"a",className:"player-vast-blocker hidden",properties:[{identity:"target",value:"_blank"},{identity:"href",value:""}]},{identity:"progress",tag:"div",className:"player-vast-progress",options:{childrens:[{identity:"loaded",tag:"div",className:"player-vast-loaded"}]}},{identity:"skip",tag:"div",className:"player-vast-skip"},{identity:"info",tag:"div",className:"player-vast-title",options:{innerHTML:"Quảng cáo"}},{identity:"control",tag:"div",className:"player-vast-control",options:{childrens:[{identity:"play",tag:"div",className:"player-vast-play",options:{childrens:[{identity:"icon",tag:"i",className:"icon-play"}]}},{identity:"mute",tag:"div",className:"player-vast-mute",options:{childrens:[{identity:"icon",tag:"i",className:"icon-volume-up"}]}},{identity:"happy",tag:"div",className:"player-vast-happy",options:{childrens:[{identity:"icon",tag:"i",className:"icon-minimise"}]}}]}}]}),player.el_.appendChild(l),player.el_.appendChild(i),player.vast={video:l,container:i},player.vast.container.control.happy.onclick=function(){player.vast.video.classList.remove("fixed"),player.happy?(player.happy=!1,player.el_.classList.remove("player-happy"),player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause(),this.icon.className="icon-minimise"):(player.happy=!0,player.el_.classList.add("player-happy"),player.embed?player.sendMessageToEmbed({play:!0}):player.video.play(),player.vast.video.volume=0,player.vast.muted=!0,this.icon.className="icon-maximise",player.vast.container.control.mute.icon.className="icon-volume-mute"),player.adUnit&&player.adUnit.resizeAd(player.el_.offsetWidth,player.el_.offsetHeight,"normal",(function(){}))}),player.vast.domain=n;var o=0,s=!1;try{o=navigator.userAgent.match(/(CriOS|Chrome|Firefox|Safari(?=\/))\/?\s*(\d+)/i)[2],console.log("browser version: "+o)}catch(e){}(!ismobile.any||ismobile.apple.device&&o>601||ismobile.other.firefox&&o>11||ismobile.other.chrome&&o>30)&&(s=!0),r.canPlayVPAID=s,e.split("doubleclick").length>1?playIMA3(e,t,a,r):getAdsResponse(e,t,a,r)}function getAdsResponse(e,t,a,r){var l=0;function i(e){if(player.options_.ads[t][a].get=!0,e)if(e.ads.length){if(e.ads[0].creatives.length>0)for(var i=0;i<e.ads.length;i++){var n=e.ads[i];try{player.adid=n.id}catch(e){}for(var o=0;o<n.creatives.length;o++){var s=n.creatives[o];if("linear"==s.type){player.vast.skip=player.options_.ads[t][a].skip,player.vast.duration=s.duration;try{s.skipDelay>player.vast.skip&&(player.vast.skip=s.skipDelay)}catch(e){console.log(e)}l&&(player.vast.skip=l);var c="",d="";if(s.mediaFiles.length)for(var p=0;p<s.mediaFiles.length;p++){if(c=s.mediaFiles[p].fileURL.trim(),d=s.mediaFiles[p].mimeType,player.tracker=new DMVAST.tracker(n,s),"video/mp4"==d)return delete n.lastURI,void playVAST(c,t,a,r);if("application/javascript"==d&&r.canPlayVPAID)return void playVPAID(c,t,a,r)}}}}}else console.log("has no ads"),player.ads=!1;else console.log("not response"),player.ads=!1;if(!player.options_.ads[t][a].play&&player.options_.ads[t][a].backup&&!player.options_.ads[t][a].get_backup)return player.options_.ads[t][a].get_backup=!0,void getAds(player.options_.ads[t][a].backup,t,a);removeAds(t,a,r)}"an"!=e.substr(8,2)?(r.facebook=!1,DMVAST.client.get(e,(function(e){i(e)}))):(r.facebook=!0,DMVAST.client.get(e,{withCredentials:!0},(function(e){i(e)}))),e.split("fimfast").length>1&&(l=5)}function stopAds(){for(var e=0;e<player.options_.ads.preroll.length;e++)player.options_.ads.preroll[e].play=!1,player.options_.ads.preroll[e].get_backup=!1;for(e=0;e<player.options_.ads.midroll.length;e++)player.options_.ads.midroll[e].play=!1,player.options_.ads.midroll[e].get_backup=!1;player.vast.video.classList.remove("fixed");try{player.vast.video.removeEventListener("loadstart",player.vast.loadstart,!1),player.vast.video.removeEventListener("timeupdate",player.vast.timeupdate,!1),player.vast.video.removeEventListener("ended",player.vast.ended,!1)}catch(e){}player.vast.skipTimeout&&clearTimeout(player.vast.skipTimeout),player.vast.vpaidInterval&&clearInterval(player.vast.vpaidInterval),player.vast.timeout&&clearTimeout(player.vast.timeout);try{player.vast.video.pause(),player.vast.video.src="",player.vast.video.removeAttribute("src")}catch(e){}if(player.vast.container.classList.add("hidden"),player.vast.video.classList.add("hidden"),player.vast.container.blocker.classList.add("hidden"),player.vast.container.vpaid.classList.add("hidden"),player.vast.container.progress.loaded.style.width="",player.ads=!1,player.happy=!1,player.adsType=null,ismobile.any&&player.init&&player.el_.classList.add("player-paused"),player.el_.classList.remove("player-happy"),player.el_.classList.remove("player-waiting"),player.embed?player.sendMessageToEmbed({play:!0}):player.video.play(),player.options_.ads.midroll)for(e=0;e<player.options_.ads.midroll.length;e++)player.removeMidpoint(e)}function removeAds(e,t,a){var r=player.episode.meta.ads;if(player.vast.video.classList.remove("fixed"),console.log("removeAds"),a||(a={}),player.adsType&&e!=player.adsType)console.log("do not remove");else{try{player.vast.video.removeEventListener("loadstart",player.vast.loadstart,!1),player.vast.video.removeEventListener("timeupdate",player.vast.timeupdate,!1),player.vast.video.removeEventListener("ended",player.vast.ended,!1)}catch(e){}player.vast.skipTimeout&&clearTimeout(player.vast.skipTimeout),player.vast.vpaidInterval&&clearInterval(player.vast.vpaidInterval),player.vast.timeout&&clearTimeout(player.vast.timeout);try{player.vast.video.style="",player.vast.video.pause(),player.vast.video.src="",player.vast.video.removeAttribute("src")}catch(e){}player.vast.video.classList.add("hidden"),player.vast.container.classList.add("hidden"),player.vast.container.blocker.classList.add("hidden"),player.vast.container.vpaid.classList.add("hidden"),player.vast.container.progress.loaded.style.width="";for(var l=0;l<player.vast.container.vpaid.children.length;l++)player.vast.container.vpaid.children[l].classList.add("hidden");try{if(a.backup&&!player.options_.ads[e][t].play)return console.log("call backup vast tag"),void getAds(r[e].data[t].backup,e,t)}catch(e){}if("midroll"!=e){if(t+1<r[e].data.length&&!r[e].data[t+1].play)return console.log("call next vast tag"),void getAds(r[e].data[t+1].url,e,t+1,a);ismobile.any&&player.init&&player.el_.classList.add("player-paused")}player.ads=!1,player.happy=!1,player.adsType=null,player.el_.classList.remove("player-happy"),player.el_.classList.remove("player-waiting"),player.embed?player.sendMessageToEmbed({play:!0}):player.video.play()}}function setMidroll(){if(!_GLOBAL._IS_VIP&&player.options_.ads.midroll&&player.options_.ads.midroll.length){var e=0,t=0;if(player.embed?(e=player.currentTime,t=player.duration):(e=player.video.currentTime,t=player.video.duration),!player.midpoint)if(t>700){t<1260&&(player.options_.ads.midroll.length=1);for(var a=0;a<player.options_.ads.midroll.length;a++)player.createMidpoint(a,player.round(player.options_.ads.midroll[a].time/t*100,2)+"%");player.midpoint=!0}else t>0&&(player.midpoint=!0);e<10||e>2460||(player.options_.ads.midroll[0].play||e>player.options_.ads.midroll[0].time&&player.options_.ads.lastTime<player.options_.ads.midroll[0].time&&getAds(player.options_.ads.midroll[0].url,"midroll",0,{backup:player.options_.ads.midroll[0].backup}),player.options_.ads.midroll.length>1&&(player.options_.ads.midroll[1].play||e>player.options_.ads.midroll[1].time&&player.options_.ads.lastTime<player.options_.ads.midroll[1].time&&getAds(player.options_.ads.midroll[1].url,"midroll",1,{backup:player.options_.ads.midroll[1].backup})),player.options_.ads.lastTime=e)}}function playVAST(e,t,a,r){var l,i=!1;try{clearInterval(player.vast.vpaidInterval)}catch(e){}player.vast.skip=player.options_.ads[t][a].skip+0,player.vast.container.info.innerText="midroll"!=t?"Quảng cáo đầu phim "+(a+1)+"/"+player.episode.meta.ads[t].data.length:"Quảng cáo giữa phim",player.el_.classList.add("player-waiting"),player.loadingText.innerText="Đang tải quảng cáo",player.vast.container.skip.style.display="",player.vast.container.skip.classList.add("hidden"),player.tracker.clickThroughURLTemplate&&(l=DMVAST.util.resolveURLTemplates([player.tracker.clickThroughURLTemplate],{CACHEBUSTER:Math.round(1e10*Math.random()),CONTENTPLAYHEAD:player.tracker.progressFormated()})[0]),player.vast.container.blocker.href=l;player.tracker.clickTrackingURLTemplates;if(player.vast.container.blocker.onclick=function(e){player.vast.video.paused?player.vast.video.play():player.vast.video.pause(),player.tracker.click()},player.ads=!0,player.adsType=t,player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),player.vast.container.classList.remove("hidden"),player.vast.video.classList.remove("hidden"),player.vast.container.blocker.classList.remove("hidden"),player.vast.video.src=e,player.vast.video.load(),player.ios.fullscreen)try{player.video.webkitExitFullscreen(),player.sendMessageToEmbed({exitFullscreen:!0})}catch(e){}player.vast.video.volume=.4;try{store.get("volume")>=.4?player.vast.video.volume=.4:player.vast.video.volume=store.get("volume")/2}catch(e){}ismobile.any||player.happy?(player.vast.video.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute"):(player.vast.video.muted=!1,player.vast.container.control.mute.icon.className="icon-volume-up"),player.vast.video.play(),player.vast.skip||(player.vast.skip=0,player.vast.container.skip.innerHTML="tắt"),player.vast.ended=function(){if(!player.vast.completed){player.vast.completed=!0,i||(console.log("complete"),player.tracker.complete());try{player.vast.video.removeEventListener("timeupdate",player.vast.timeupdate,!1)}catch(e){console.log(e)}removeAds(t,a)}},player.vast.timeupdate=function(){if(player.vast.video.duration){player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause());var e=player.vast.video.currentTime,t=player.tracker.quartiles.firstQuartile,a=player.tracker.quartiles.midpoint,r=player.tracker.quartiles.thirdQuartile;if(player.vast.currentTime<t&&e>t){console.log("firstQuartile");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.firstQuartile)}catch(e){}}else if(player.vast.currentTime<a&&e>a){console.log("midpoint");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.midpoint)}catch(e){}}else if(player.vast.currentTime<r&&e>r){console.log("thirdQuartile");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.thirdQuartile)}catch(e){}}if(player.vast.currentTime=e,player.vast.container.skip.classList.remove("hidden"),player.vast.container.progress.loaded.style.width=player.round(e/player.vast.video.duration*100,2)+"%",player.vast.skip){if(player.vast.countdown=Math.ceil(player.vast.skip-e),player.vast.countdown>0)player.vast.container.skip.style.cursor="not-allowed",player.vast.container.skip.innerHTML=player.vast.countdown;else if(player.vast.container.skip.style.cursor="",player.vast.container.skip.innerHTML="tắt",!ismobile.any&&"delivery.yomedia.vn"==player.vast.domain)return player.vast.container.classList.add("hidden"),player.vast.video.volume=0,player.embed?player.sendMessageToEmbed({play:!0}):player.video.play(),player.isFullscreen()?(player.happy||player.vast.container.control.happy.click(),void(player.vast.skip=0)):void player.vast.video.classList.add("fixed")}else player.vast.container.skip.innerHTML="tắt"}},player.vast.loadstart=function(){!0,player.vast.completed=!1,player.tracker.impressed=!1,console.log("impression"),player.tracker.load(),console.log("start");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.start)}catch(e){}player.hideLoadingSpinner(),player.trackEvent("VAST impression",e),player.options_.ads[t][a].play=!0,ismobile.any||(player.vast.video.muted=!1),"preroll"!=t&&player.removeMidpoint(a)},player.vast.video.addEventListener("loadstart",player.vast.loadstart),player.vast.video.addEventListener("loadedmetadata",(function(){(isNaN(player.tracker.assetDuration)||player.tracker.assetDuration>player.vast.video.duration)&&(player.tracker.assetDuration=player.vast.video.duration),player.vast.skip>player.vast.video.duration&&(player.vast.skip=player.vast.video.duration),player.tracker.quartiles||(player.tracker.quartiles={firstQuartile:.25*player.tracker.assetDuration,midpoint:.5*player.tracker.assetDuration,thirdQuartile:.75*player.tracker.assetDuration})})),player.vast.video.addEventListener("play",(function(){!0,player.hideLoadingSpinner(),player.vast.container.control.play.icon.className="icon-pause",player.el_.classList.remove("player-waiting"),player.loadingText.innerText=""})),player.vast.video.addEventListener("pause",(function(){player.vast.container.control.play.icon.className="icon-play"})),player.vast.video.addEventListener("error",(function(e){i=!0;try{player.tracker.errorWithCode(405)}catch(e){}removeAds(t,a,r)})),player.vast.video.addEventListener("ended",player.vast.ended),player.vast.video.addEventListener("webkitendfullscreen",(function(){player.ios.fullscreen=!1})),player.vast.video.addEventListener("playing",player.hideLoadingSpinner),player.vast.container.control.play.onclick=function(){player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),player.vast.video.paused?player.vast.video.play():player.vast.video.pause()},player.vast.container.control.mute.onclick=function(){player.vast.video.muted?(player.vast.video.muted=!1,player.vast.container.control.mute.icon.className="icon-volume-up"):(player.vast.video.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute")},player.vast.container.skip.onclick=function(e){if(e.stopPropagation(),e.preventDefault(),!(player.vast.countdown>0||null==player.vast.countdown)){if(!ismobile.any&&"delivery.yomedia.vn"==player.vast.domain)return player.vast.container.classList.add("hidden"),player.vast.video.volume=0,player.embed?player.sendMessageToEmbed({play:!0}):player.video.play(),player.isFullscreen()?void(player.happy||player.vast.container.control.happy.click()):void player.vast.video.classList.add("fixed");player.vast.video.pause();try{player.vast.video.removeAttribute("src")}catch(e){}player.tracker.skip(),removeAds(t,a,r)}},player.vast.video.addEventListener("timeupdate",player.vast.timeupdate),player.vast.skip>0&&(player.vast.skipTimeout=setTimeout((function(){player.vast.countdown>0&&(player.vast.skip=0,player.vast.countdown=0,player.vast.container.skip.style.cursor="",player.vast.container.skip.innerHTML="tắt")}),1e3*(player.vast.skip+5)))}function playVPAID(e,t,a,r){console.log("playVPAID");var l=!1,i=!1;player.ads=!0,player.adsType=t,player.vast.countdown=void 0,player.vast.skip=player.options_.ads[t][a].skip+0,player.vast.completed=!1,r||(r={});try{clearInterval(player.vast.vpaidInterval)}catch(e){}player.el_.classList.add("player-waiting"),player.loadingText.innerText="Đang tải quảng cáo",player.vast.paused=!1,player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),player.vast.video.classList.remove("hidden"),player.vast.container.classList.remove("hidden"),player.vast.container.vpaid.classList.remove("hidden"),player.vast.container.control.play.icon.className="icon-pause",player.vast.container.skip.style.display="",player.vast.container.skip.classList.add("hidden"),player.vast.container.info.classList.remove("hidden"),1555484313==player.adid||1555484423==player.adid||"Sanofi_-_FE7330F8_Calcium_Corbiere"==player.adtitle?player.vast.container.noskip.classList.add("hidden"):player.vast.container.noskip.classList.remove("hidden"),player.vast.container.info.innerText="midroll"!=t?"Quảng cáo đầu phim "+(a+1)+"/"+player.episode.meta.ads[t].data.length:"Quảng cáo giữa phim",new VPAIDHTML5Client(player.vast.container,player.vast.video,{},{timeout:3e3,element:".player-vast-vpaid"}).loadAdUnit(e,(function(e,n){if(e){player.adUnit=null,player.vast.stopped=!0;try{DMVAST.util.track(player.vast.ad.errorURLTemplates,{ERRORCODE:405})}catch(e){}return void removeAds(t,a,r)}function o(){console.log("call Stop Ad"),n._destroy(),player.adUnit=null,player.vast.stopped=!0,clearInterval(player.vast.vpaidInterval),removeAds(t,a,r)}player.vast.container.classList.remove("hidden"),player.vast.container.vpaid.classList.remove("hidden"),player.vast.stopped=!1,player.adUnit=n,n.subscribe("AdLoaded",(function(){i=!0,player.ads=!0,player.completed=!1,player.el_.classList.remove("player-waiting"),player.loadingText.innerText="",player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),"preroll"!=t&&player.removeMidpoint(a),player.options_.ads[t][a].play=!0,player.vast.container.classList.remove("hidden"),player.vast.video.classList.remove("hidden"),r.facebook&&setTimeout((function(){player.vast.container.info.classList.add("hidden")}),2e3),console.log("impression"),player.tracker.load(),n.startAd(),n.setAdVolume(.4),r.facebook||(ismobile.any?(n.setAdVolume(0),player.vast.muted=!0,player.vast.video.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute"):(player.vast.video.muted=!1,player.vast.container.control.mute.icon.className="icon-volume-up")),l||(console.log("Avoid duplicate vpaid on init"),e=player.vast.skip,o=0,player.duration=n._creative.getAdDuration(),(!player.duration||player.duration>30)&&(player.duration=15),player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),setTimeout((function(){player.duration<n._creative.getAdRemainingTime()&&(player.duration=n._creative.getAdRemainingTime())}),900),player.vast.vpaidInterval=setInterval((function(){var t=n._creative.getAdRemainingTime(),a=player.duration-t,r=Math.ceil(e-a);player.vast.countdown=r,o++,r>0?(player.vast.container.skip.style.cursor="not-allowed",player.vast.container.skip.innerHTML=r):(player.vast.container.skip.style.cursor="",player.vast.container.skip.innerHTML="tắt",player.vast.skip=0,player.vast.container.noskip.classList.add("hidden")),player.vast.container.progress.loaded.style.width=a/player.duration*100+"%",(t<=0||o>player.duration)&&(player.vast.countdown=0,console.log("clearInterval vpaid"),clearInterval(player.vast.vpaidInterval))}),1e3),console.log("PLAYER.VAST.VPAID_INTERVAL"),console.log(player.vast.vpaidInterval)),l=!0;var e,o})),n.subscribe("AdStarted",(function(){player.started=!0,console.log("start"),console.log(player.tracker);try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.start)}catch(e){}player.vast.container.control.play.icon.className="icon-pause",player.vast.container.skip.classList.remove("hidden"),player.el_.classList.remove("player-waiting"),player.loadingText.innerText=""})),n.subscribe("AdStopped",o),n.subscribe("AdSkipped",o),n.subscribe("AdPaused",(function(){player.vast.stopped||(player.vast.paused=!0,player.vast.container.control.play.icon.className="icon-play",console.log("vpaid onPaused"))})),n.subscribe("AdPlaying",(function(){player.vast.paused=!1,player.vast.container.control.play.icon.className="icon-pause",player.hideLoadingSpinner(),console.log("vpaid onPlaying")})),n.subscribe("AdVideoFirstQuartile",(function(){console.log("onFirstQuartile");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.firstQuartile)}catch(e){}})),n.subscribe("AdVideoMidpoint",(function(){console.log("onMidpoint");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.midpoint)}catch(e){}})),n.subscribe("AdVideoThirdQuartile",(function(){console.log("onThirdQuartile");try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.thirdQuartile)}catch(e){}})),n.subscribe("AdVideoComplete",(function(){console.log("onComplete"),player.completed=!0,player.tracker.complete()})),n.subscribe("AdClickThru",(function(e){e.playerHandles&&window.open(e.url,"_blank"),player.tracker.click()})),n.handshakeVersion("2.0",(function(e,t){n.initAd(player.el_.offsetWidth,player.el_.offsetHeight,"normal",-1,{AdParameters:player.tracker.creative.adParameters},{})})),player.vast.container.control.play.onclick=function(){if(player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),player.init&&player.vast.video.paused)return n.pauseAd(),void n.resumeAd();player.vast.paused?(n.resumeAd(),player.vast.paused=!1):(n.pauseAd(),player.vast.paused=!0)},player.vast.container.control.mute.onclick=function(){player.vast.muted?(n.setAdVolume(.4,(function(){})),player.vast.muted=!1,player.vast.video.muted=!1,player.vast.container.control.mute.icon.className="icon-volume-up"):(n.setAdVolume(0,(function(){})),player.vast.muted=!0,player.vast.video.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute")},player.vast.container.skip.onclick=function(e){if(console.log("skip vpaid"),e.stopPropagation(),e.preventDefault(),!(player.vast.countdown>0||null==player.vast.countdown)){n.skipAd(),console.log("adUnit skip"),player.tracker.skip(),player.vast.video.pause();try{player.vast.video.removeAttribute("src")}catch(e){}console.log("call remove ads"),removeAds(t,a,r)}}}));var n=setTimeout((function(){player.vast.container.skip.classList.remove("hidden")}),16e3);player.vast.timeout=setTimeout((function(){i||(console.log("Ad timeout"),clearTimeout(n),removeAds(t,a,r))}),5e3)}function playIMA3(e,t,a,r){console.log("play ima3");var l,i=!1;player.ads=!0,player.adsType=t,player.vast.countdown=void 0,player.vast.skip=player.options_.ads[t][a].skip+0,player.vast.completed=!1,r||(r={});try{console.log(google.ima)}catch(e){return void removeAds(t,a,r)}try{e=(e=(e=(e=e.replace("[page_url]",encodeURIComponent(window.location.href))).replace("[width]",player.el_.offsetWidth)).replace("[height]",player.el_.offsetHeight)).replace("[timestamp]",(new Date).getTime()),clearInterval(player.vast.vpaidInterval)}catch(e){}player.el_.classList.add("player-waiting"),player.loadingText.innerText="Đang tải quảng cáo",player.vast.paused=!1,player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),player.vast.video.classList.remove("hidden"),player.vast.container.classList.remove("hidden"),player.vast.container.vpaid.classList.remove("hidden"),player.vast.container.control.play.icon.className="icon-pause",player.vast.container.skip.style.display="",player.vast.container.skip.classList.add("hidden"),player.vast.container.info.classList.remove("hidden"),1555484313==player.adid||1555484423==player.adid||"Sanofi_-_FE7330F8_Calcium_Corbiere"==player.adtitle?player.vast.container.noskip.classList.add("hidden"):player.vast.container.noskip.classList.remove("hidden"),player.vast.container.info.innerText="midroll"!=t?"Quảng cáo đầu phim "+(a+1)+"/"+player.episode.meta.ads[t].data.length:"Quảng cáo giữa phim",google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE);var n=new google.ima.AdDisplayContainer(player.vast.container.vpaid,player.vast.video),o=new google.ima.AdsLoader(n);function s(e){var n=e.getAd(),o=n.getDuration(),s=Math.ceil(player.vast.skip);switch(o||(o=player.vast.duration),e.type){case google.ima.AdEvent.Type.LOADED:if(console.log("vpaid loaded"),!n.isLinear())return void console.log("NOT LINEAR");if(player.ios.fullscreen)try{player.video.webkitExitFullscreen(),player.sendMessageToEmbed({exitFullscreen:!0})}catch(e){}player.vast.completed=!1,ismobile.any||player.happy?(l.setVolume(0),player.vast.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute"):l.setVolume(.4),player.vast.paused=!0,player.vast.timeout=setTimeout((function(){if(!i){console.log("Ad timeout");try{l.pause()}catch(e){}removeAds(t,a)}}),8e3);break;case google.ima.AdEvent.Type.STARTED:if(console.log("vpaid started"),i=!0,player.vast.paused=!1,player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause(),player.vast.timeout&&clearTimeout(player.vast.timeout),r.xml)try{player.tracker.trackURLs(player.tracker.creative.trackingEvents.start)}catch(e){}if(player.vast.container.classList.remove("hide"),player.vast.container.vpaid.classList.remove("hide"),player.vast.container.control.play.icon.className="icon-pause",player.vast.container.skip.classList.remove("hidden"),player.el_.classList.remove("player-waiting"),player.loadingText.innerText="","preroll"!=t&&player.removeMidpoint(a),player.options_.ads[t][a].play=!0,ismobile.any||player.happy?(l.setVolume(0),player.vast.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute"):l.setVolume(.4),n.isLinear()){try{clearInterval(player.vast.vpaidInterval)}catch(e){}player.vast.vpaidInterval=setInterval((function(){var e=l.getRemainingTime(),t=n.getDuration(),a=t-e;s--,player.vast.countdown=s,player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),s<=0?(player.vast.container.skip.innerHTML="tắt",player.vast.container.skip.classList.remove("disabled"),player.vast.container.noskip.classList.add("hidden"),player.skippable=!0):(player.vast.container.skip.innerHTML=s,player.vast.container.skip.classList.add("disabled")),player.vast.container.skip.classList.remove("hide"),player.vast.container.progress.loaded.style.width=a/t*100+"%",e<=0&&clearInterval(player.vast.vpaidInterval)}),1e3)}break;case google.ima.AdEvent.Type.FIRST_QUARTILE:console.log("vpaid firstQuartile");break;case google.ima.AdEvent.Type.MIDPOINT:console.log("vpaid midpoint");break;case google.ima.AdEvent.Type.THIRD_QUARTILE:console.log("vpaid thirdQuartile"),player.thirdQuartile=!0;break;case google.ima.AdEvent.Type.COMPLETE:if(console.log("vpaid completed"),player.vast.completed)return;player.vast.completed=!0,removeAds(t,a);break;case google.ima.AdEvent.Type.SKIPPED:console.log("vpaid skipped"),removeAds(t,a);break;case google.ima.AdEvent.Type.CLICK:break;case google.ima.AdEvent.Type.VOLUME_MUTED:player.vast.video.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute";break;case google.ima.AdEvent.Type.VOLUME_CHANGED:l.getVolume()>0&&(player.vast.video.muted=!1,player.vast.container.control.mute.icon.className="icon-volume-up");break;case google.ima.AdEvent.Type.PAUSED:player.vast.paused=!0,player.vast.container.control.play.icon.className="icon-play";break;case google.ima.AdEvent.Type.RESUMED:player.vast.paused=!1,player.vast.started||(player.vast.started=!0),player.vast.container.control.play.icon.className="icon-pause"}}o.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){var i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,(l=e.getAdsManager(player.vast.video,i)).addEventListener(google.ima.AdEvent.Type.LOADED,s),l.addEventListener(google.ima.AdEvent.Type.STARTED,s),l.addEventListener(google.ima.AdEvent.Type.COMPLETE,s),l.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){console.log("Ad error"),console.log(e),player.vast.stopped=!0;try{l.destroy(),player.adsManager=null,player.vast.container.vpaid.innerHTML=""}catch(e){}removeAds(t,a,r)})),l.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,s),l.addEventListener(google.ima.AdEvent.Type.MIDPOINT,s),l.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,s),l.addEventListener(google.ima.AdEvent.Type.PAUSED,s),l.addEventListener(google.ima.AdEvent.Type.RESUMED,s),l.addEventListener(google.ima.AdEvent.Type.SKIPPED,s),l.addEventListener(google.ima.AdEvent.Type.CLICK,s),l.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,s),l.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,s),l.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,s),l.init(player.vast.container.offsetWidth,player.vast.container.offsetHeight,google.ima.ViewMode.NORMAL),ismobile.any||player.happy?(l.setVolume(0),player.vast.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute"):l.setVolume(.4);l.start(),player.adsManager=l}),!1),o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){console.log(e),player.vast.stopped=!0;try{l.destroy(),DMVAST.util.track(player.vast.ad.errorURLTemplates,{ERRORCODE:405})}catch(e){}removeAds(t,a,r)}),!1);var c=new google.ima.AdsRequest;c.adTagUrl=e,c.linearAdSlotWidth=player.el_.offsetWidth,c.linearAdSlotHeight=player.el_.offsetHeight,c.nonLinearAdSlotWidth=player.el_.offsetWidth,c.nonLinearAdSlotHeight=player.el_.offsetHeight,o.requestAds(c),n.initialize(),player.vast.container.control.play.onclick=function(){if(player.happy||(player.embed?player.sendMessageToEmbed({pause:!0}):player.video.pause()),player.init&&player.vast.video.paused)return l.pause(),void l.resume();player.vast.paused?l.resume():l.pause()},player.vast.container.control.mute.onclick=function(){player.vast.muted?(l.setVolume(.2),player.vast.muted=!1,player.vast.video.muted=!1,player.vast.container.control.mute.icon.className="icon-volume-up"):(l.setVolume(0),player.vast.muted=!0,player.vast.video.muted=!0,player.vast.container.control.mute.icon.className="icon-volume-mute")},player.vast.container.skip.onclick=function(e){e.stopPropagation(),e.preventDefault(),player.vast.countdown>0||null==player.vast.countdown||l.skip()}}function countdownTimer(e,t,a){var r,l,i,n,o=0,s=0,c=0,d=0,p="",u=player.sync;switch((a=new Date(a)).getDay()){case 1:p="thứ hai";break;case 2:p="thứ ba";break;case 3:p="thứ tư";break;case 4:p="thứ năm";break;case 5:p="thứ sáu";break;case 6:p="thứ bảy";break;default:p="chủ nhật"}if(!u)try{u=store.get("sync")}catch(e){u=0}function y(e){return e<10?"0"+e:e}var v=createElementByJs("countdown","div","player-countdown",{childrens:[{identity:"background",tag:"img",className:"player-thumbnail",options:{},properties:[{identity:"src",value:"/assets/img/countdown-bg.png"}]},{identity:"content",tag:"div",className:"player-countdown-body",options:{childrens:[{identity:"name",tag:"div",className:"player-countdown-title",options:{innerHTML:t}},{identity:"date",tag:"div",className:"player-countdown-date",options:{innerHTML:"<span>Đón xem vào lúc</span> "+y(a.getHours())+":"+y(a.getMinutes())+" <span>"+p+"</span> "+y(a.getDate())+"/"+y(a.getMonth()+1)+"/"+a.getFullYear()}},{identity:"timer",tag:"div",className:"player-countdown-timer",options:{childrens:[{identity:"days",tag:"div",className:"countdown p100 days",options:{childrens:[{identity:"value",tag:"span",className:"countdown-value"},{identity:"label",tag:"span",className:"",options:{innerHTML:"ngày"}},{identity:"slice",tag:"div",className:"slice",options:{childrens:[{identity:"bar",tag:"div",className:"bar"},{identity:"fill",tag:"div",className:"fill"}]}}]}},{identity:"hours",tag:"div",className:"countdown p100 hours",options:{childrens:[{identity:"value",tag:"span",className:"countdown-value"},{identity:"label",tag:"span",className:"",options:{innerHTML:"giờ"}},{identity:"slice",tag:"div",className:"slice",options:{childrens:[{identity:"bar",tag:"div",className:"bar"},{identity:"fill",tag:"div",className:"fill"}]}}]}},{identity:"minutes",tag:"div",className:"countdown p100 minutes",options:{childrens:[{identity:"value",tag:"span",className:"countdown-value"},{identity:"label",tag:"span",className:"",options:{innerHTML:"phút"}},{identity:"slice",tag:"div",className:"slice",options:{childrens:[{identity:"bar",tag:"div",className:"bar"},{identity:"fill",tag:"div",className:"fill"}]}}]}},{identity:"seconds",tag:"div",className:"countdown p100 seconds",options:{childrens:[{identity:"value",tag:"span",className:"countdown-value"},{identity:"label",tag:"span",className:"",options:{innerHTML:"giây"}},{identity:"slice",tag:"div",className:"slice",options:{childrens:[{identity:"bar",tag:"div",className:"bar"},{identity:"fill",tag:"div",className:"fill"}]}}]}}]}}]}}]});player.el_.appendChild(v),player.el_.classList.add("player-has-countdown"),player.el_.classList.remove("player-waiting"),player.el_.classList.remove("player-error"),player.countdown=v,player.isFullscreen()&&player.exitFullscreen(),a=a.getTime(),i=setInterval((function(){var e=100;l=setInterval((function(){--e<=0&&clearInterval(l);try{player.countdown.content.timer.days.className="countdown days p"+e,player.countdown.content.timer.hours.className="countdown hours p"+e,player.countdown.content.timer.minutes.className="countdown minutes p"+e}catch(e){clearInterval(l)}}),8)}),1e4),r=setInterval((function(){if((n=a-(new Date).getTime()+u)<0){clearInterval(r),clearInterval(i),getEpisode(!0,e,{current:!0,refresh:!0});try{removeElement(player.countdown),player.countdown=void 0,player.el_.classList.remove("player-has-countdown")}catch(e){}}else o=Math.floor(n/864e5),s=Math.floor(n%864e5/36e5),c=Math.floor(n%36e5/6e4),d=Math.floor(n%6e4/1e3),player.countdown.content.timer.days.className="countdown days p"+Math.floor(100*o/30),player.countdown.content.timer.days.value.innerText=o,player.countdown.content.timer.hours.className="countdown hours p"+Math.floor(100*s/24),player.countdown.content.timer.hours.value.innerText=s,player.countdown.content.timer.minutes.className="countdown minutes p"+Math.floor(100*c/60),player.countdown.content.timer.minutes.value.innerText=c,player.countdown.content.timer.seconds.className="countdown seconds p"+Math.floor(100*d/60),player.countdown.content.timer.seconds.value.innerText=d}),1e3),player.timer={interval:r,animate:l,full:i}}window.p2pDomain="https://s0.vdicdn.com",window.onpopstate=function(e){clearTimeout(onpopstateTimeout),popState(e)},window.addEventListener("resize",resizePlayerByVideoResolution),window.addEventListener("resize",(function(){try{if(player.isFullscreen())return void player.updateTextTrackPosition(!0);player.updateTextTrackPosition(!1)}catch(e){}})),window.addEventListener("load",(function(){var e;(e=ismobile.any?sendAjax("get","/mmo/mb.json"):sendAjax("get","/mmo/pc.json")).onload=function(){var t=JSON.parse(e.responseText);if(t.status)try{if(t.logo.length){var a=document.createElement("div");a.className="player-sponsor-logo",a.innerHTML='<a href="'+t.logo[0].link+'" target="_blank"><img style="width:100%;height100%;" src="'+t.logo[0].img+'"></a>',player.el_.appendChild(a)}}catch(e){}}}));
